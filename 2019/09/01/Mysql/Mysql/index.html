<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/sousuo1.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/juxiezuo32.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/juxiezuo16.png?v=7.2.0">


  <link rel="mask-icon" href="/images/juxiezuo.png?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="1.1.1mysql下载安装下载地址：https://dev.mysql.com/downloads/mysql/  保存数据的容器： 数组，集合，都是放在内存上，文件来说以不好查找 1.数据库的好处： 实现数据持久化  使用完事的管理系统统一管理，易于查询 DB: 数据库：database:存储数据的仓库 ，保存了一系列有组织的数据 DBMS 数据库管理系统databasm management">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql">
<meta property="og:url" content="http://yoursite.com/2019/09/01/Mysql/Mysql/index.html">
<meta property="og:site_name" content="张易的博客">
<meta property="og:description" content="1.1.1mysql下载安装下载地址：https://dev.mysql.com/downloads/mysql/  保存数据的容器： 数组，集合，都是放在内存上，文件来说以不好查找 1.数据库的好处： 实现数据持久化  使用完事的管理系统统一管理，易于查询 DB: 数据库：database:存储数据的仓库 ，保存了一系列有组织的数据 DBMS 数据库管理系统databasm management">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://i.loli.net/2019/11/03/EwLAgDCGrhvb8o5.png">
<meta property="og:image" content="https://i.loli.net/2019/11/05/awoLZfx8zneQki6.png">
<meta property="og:updated_time" content="2019-11-10T06:38:29.262Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mysql">
<meta name="twitter:description" content="1.1.1mysql下载安装下载地址：https://dev.mysql.com/downloads/mysql/  保存数据的容器： 数组，集合，都是放在内存上，文件来说以不好查找 1.数据库的好处： 实现数据持久化  使用完事的管理系统统一管理，易于查询 DB: 数据库：database:存储数据的仓库 ，保存了一系列有组织的数据 DBMS 数据库管理系统databasm management">
<meta name="twitter:image" content="https://i.loli.net/2019/11/03/EwLAgDCGrhvb8o5.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/09/01/Mysql/Mysql/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Mysql | 张易的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/zhangyi-6" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">张易的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/Mysql/Mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张易">
      <meta itemprop="description" content="张易 来自东北省">
      <meta itemprop="image" content="/images/guwang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="张易的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mysql

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-09-01 21:34:37" itemprop="dateCreated datePublished" datetime="2019-09-01T21:34:37+08:00">2019-09-01</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-11-10 14:38:29" itemprop="dateModified" datetime="2019-11-10T14:38:29+08:00">2019-11-10</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-1-1mysql下载安装"><a href="#1-1-1mysql下载安装" class="headerlink" title="1.1.1mysql下载安装"></a>1.1.1mysql下载安装</h2><p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p>
<p><img src="https://i.loli.net/2019/11/03/EwLAgDCGrhvb8o5.png" alt="2.png"></p>
<p>保存数据的容器：</p>
<p>数组，集合，都是放在内存上，文件来说以不好查找</p>
<h3 id="1-数据库的好处："><a href="#1-数据库的好处：" class="headerlink" title="1.数据库的好处："></a>1.数据库的好处：</h3><ol>
<li><p>实现数据持久化</p>
</li>
<li><p>使用完事的管理系统统一管理，易于查询</p>
<p><strong>DB:</strong></p>
<p>数据库：database:存储数据的仓库 ，保存了一系列有组织的数据</p>
<p><strong>DBMS</strong></p>
<p>数据库管理系统databasm management system    数据库是通过DBMS创建和操作的容器</p>
<p><strong>SQL</strong></p>
<p>结构化查询语言structure query language  ，专门用来与数据库通信的语言</p>
</li>
</ol>
<p>SQL的优点：</p>
<ol>
<li>不是某个特定数据库供应商专有的语言，几乎所有DBMS都支持SQL</li>
<li>简单</li>
<li>表具有一定特性，类似java的类</li>
<li>表由列组成，我们也称为字段，所有表都是由一个或多个列组成的，每一列类似java中的属性</li>
<li>表中的数据是按行存储的，每一行类似于Javak 中的对象 </li>
</ol>
<h3 id="2-MYSQL产品的特点"><a href="#2-MYSQL产品的特点" class="headerlink" title="2.MYSQL产品的特点"></a>2.MYSQL产品的特点</h3><p>MYSQL数据库隶属于MYSQLAB公司，总部在瑞典，被oracle收购</p>
<p>优点：成本低，开放源代码</p>
<p>性能高：执行很快</p>
<p>简单：易安装使用</p>
<p><strong>DBMS</strong>分为 </p>
<ul>
<li><p>基于共享文件系统  DBMS(Access)</p>
</li>
<li><p>基于客户机 —-服务器的DBMS（mysql,oracle,sqlserver）c/s架构的</p>
</li>
<li><p>下载地址</p>
</li>
<li><p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p>
</li>
</ul>
<hr>
<h2 id="1-1-2-mysql常见命令"><a href="#1-1-2-mysql常见命令" class="headerlink" title="1.1.2 mysql常见命令"></a>1.1.2 mysql常见命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.查看当前所有数据库</span><br><span class="line">show databases;</span><br><span class="line">2.打开指定的库</span><br><span class="line">use 库名</span><br><span class="line">3.查看其它库的所有表</span><br><span class="line">show tables;</span><br><span class="line">4.查看其它库的所有表</span><br><span class="line">show tables from 库名;</span><br><span class="line">5.创建表</span><br><span class="line">create table 表名&#123;</span><br><span class="line"> 	列名 列类型,</span><br><span class="line"> 	列名 列类型,</span><br><span class="line"> 	...</span><br><span class="line">&#125;</span><br><span class="line">6.查看表结构 </span><br><span class="line">desc 表名;</span><br></pre></td></tr></table></figure>

<p><strong>查看mysql服务端</strong></p>
<p>方式一：登录到mysql服务端</p>
<p>select version();</p>
<p>方式二:没有登录到mysql服务端</p>
<p>mysql –version</p>
<hr>
<h2 id="1-1-3-mysql语法规范"><a href="#1-1-3-mysql语法规范" class="headerlink" title="1.1.3 mysql语法规范"></a>1.1.3 mysql语法规范</h2><p>1.不区分大小写，但建议关键字大写，表名，列名小写</p>
<p>2.每条命令用分号结尾 </p>
<p>3.每条命令根据需要，可以进行缩进或换行 </p>
<p>4.注释：</p>
<p>​    单行注释：#</p>
<p>​    单选注释：   (空格)–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多选注释：/*注释文字*/</span><br></pre></td></tr></table></figure>

<p>在sqlyog中， F12可以格式化sql语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">#进阶1:基础查询</span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">select 查询列表 from 表名;</span><br><span class="line">类似于System.out.println(打印的东西);</span><br><span class="line"></span><br><span class="line">特点:</span><br><span class="line">1.查询列表可以是，表中的字段、常量值、表达式、函数</span><br><span class="line">2.查询的结果是一个虚拟的表格</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.查询表中的单个字段</span><br><span class="line">SELECT last_name FROM employees;</span><br><span class="line"></span><br><span class="line">#2,查询表中的多个字段</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary,</span><br><span class="line">  email </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">#3.查询表中的所有字段</span><br><span class="line">SELECT * FROM employees;</span><br><span class="line"></span><br><span class="line">#4.查询常量值</span><br><span class="line">SELECT 100;</span><br><span class="line">SELECT &apos;john&apos;;</span><br><span class="line"></span><br><span class="line">#5 查询表达式</span><br><span class="line">SELECT  100%98;</span><br><span class="line"></span><br><span class="line">#6.查询函数</span><br><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#7. 起别名</span><br><span class="line">/*</span><br><span class="line">好处:</span><br><span class="line">1.便于理解 </span><br><span class="line">2.如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#方式一:使用as</span><br><span class="line">SELECT	100%98 AS 结果;</span><br><span class="line">SELECT  last_name  AS 姓,first_name AS 名 FROM employees;</span><br><span class="line">#方式二：使用空格 </span><br><span class="line">SELECT	last_name 张, first_name 易  FROM employees;</span><br><span class="line"></span><br><span class="line">#k案例:查询salary：显示结果为 out put </span><br><span class="line"> SELECT  salary  AS &quot;out put&quot;  FROM employees;</span><br><span class="line"> </span><br><span class="line">#去重</span><br><span class="line">#案例；查询员工表中涉及到所有的部门编号</span><br><span class="line">SELECT  DISTINCT  department_id FROM   employees;</span><br><span class="line"></span><br><span class="line">#+号的作用</span><br><span class="line">/*</span><br><span class="line">java中的+号</span><br><span class="line">1.运算符，两个操作数都为数值型</span><br><span class="line">2.连接符，只要有一个操作数为字符串</span><br><span class="line">  </span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能:运算符</span><br><span class="line"></span><br><span class="line">select 100+90; 两个操作数都为数值型，则做加法运算</span><br><span class="line">select 100+&apos;a&apos;;只要其中一方为字符型，试图将字符型数值</span><br><span class="line">转成数值型</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">#案例:查询员工名和姓连接成一个字段，并显示为  姓名</span><br><span class="line">SELECT </span><br><span class="line">  last_name + first_name AS 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">#CONCAT  拼接字符</span><br><span class="line"></span><br><span class="line">SELECT CONCAT (&apos;a&apos;,&apos;b&apos;,&apos;c&apos;) AS 结果;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#ifnull</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    `first_name`,</span><br><span class="line">    `last_name`,</span><br><span class="line">    `email`,</span><br><span class="line">    `phone_number`,</span><br><span class="line">    `job_id`,</span><br><span class="line">    `salary`,</span><br><span class="line">    IFNULL(commission_pct,0),</span><br><span class="line">    `manager_id`,</span><br><span class="line">    `department_id`,</span><br><span class="line">    `hiredate`</span><br><span class="line">  ) AS out_put </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">   select 查询列表 </span><br><span class="line">   from   表名</span><br><span class="line">   where  筛选条件;</span><br><span class="line">   分类:</span><br><span class="line">   一.按条件表达式筛选:</span><br><span class="line">   条件运算符:&gt; &lt; = != &lt;&gt; &gt;= &lt;=</span><br><span class="line">   </span><br><span class="line">   二.按逻辑表达式筛选</span><br><span class="line">   逻辑运算符:</span><br><span class="line">   &amp;&amp;  ||  !</span><br><span class="line">   and or not </span><br><span class="line">   </span><br><span class="line"> &amp;&amp;和 and: 两个条件都true&lt;结果为true,反之为false</span><br><span class="line"> || 或 or:只要有一个条件为true，结果为true，</span><br><span class="line"> !或not:如果连接条件为false,结果为true,反之为false</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">   三. 模糊查询 </span><br><span class="line">   </span><br><span class="line">   /*like </span><br><span class="line">   between  and </span><br><span class="line">   in  </span><br><span class="line">   is null is not null*/</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   #1.like</span><br><span class="line">   /*</span><br><span class="line">   特点：</span><br><span class="line">   1.一般和通配符搭配使用</span><br><span class="line">   %任意多个字符，包含0个字符</span><br><span class="line">   _任意单个字符，</span><br><span class="line">   </span><br><span class="line">   */</span><br><span class="line">   </span><br><span class="line">   #案例1：查询员工名中包含字符a的员工信息</span><br><span class="line">   SELECT * FROM employees WHERE last_name LIKE </span><br><span class="line">   &apos;%a%&apos;;</span><br><span class="line">   #案例2：查询员工第三个字符为a,第五个字符为a的员工名和工资</span><br><span class="line">   SELECT last_name,salary FROM employees WHERE </span><br><span class="line">   last_name LIKE &apos;__a_a%&apos;;</span><br><span class="line">   #案例3:查询员工名中第二个字符为_的员工名</span><br><span class="line">   SELECT last_name FROM employees </span><br><span class="line">   WHERE last_name LIKE &apos;_\_%&apos;;</span><br><span class="line">   </span><br><span class="line">*/ </span><br><span class="line">#一 按条件表达式筛选</span><br><span class="line">#案例1:查询工资&gt;12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">*</span><br><span class="line">FROM employees</span><br><span class="line">WHERE  salary&gt;12000;</span><br><span class="line"></span><br><span class="line">#案例2: 查询部门编号不等于90号的员工名和部门编号</span><br><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	department_id</span><br><span class="line">FROM </span><br><span class="line">	employees</span><br><span class="line">WHERE    </span><br><span class="line">	department_id!=90;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-1-4-模糊查询"><a href="#1-1-4-模糊查询" class="headerlink" title="1.1.4 模糊查询"></a>1.1.4 模糊查询</h2><p><strong>between and</strong></p>
<h1 id="between-and"><a href="#between-and" class="headerlink" title="between and"></a>between and</h1> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#between</span><br><span class="line"> /*</span><br><span class="line"> 1.使用between and可以提高语句的简洁度</span><br><span class="line"> 2.包含临界值</span><br><span class="line"> 3.两个临界值不要调换位置</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"> #案例:查询员工编号在100到120之间的员工信息</span><br><span class="line"> SELECT * FROM employees WHERE employee_id BETWEEN 100 AND 120;</span><br></pre></td></tr></table></figure>

<p><strong>in关键字</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#3.in</span><br><span class="line">#案例:查询员工的工种编号是  IT_PROG</span><br><span class="line">/*</span><br><span class="line">含义：判断某字段的值是否属于in列表中的某一项</span><br><span class="line">特点：1.使用in提高语句简洁度</span><br><span class="line">      2.in列表的值类型必须一致或兼容</span><br><span class="line">   </span><br><span class="line">*/</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id IN (&apos;IN_PROT&apos;,  &apos;AD_VP&apos;, &apos;AD_PRES&apos;) ;</span><br></pre></td></tr></table></figure>

<p><strong>is null关键字</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#is null</span><br><span class="line">/*</span><br><span class="line">=或&lt;&gt;不能用于判断null值</span><br><span class="line">is null 或is not null 可以判断null值</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例:查询没有资金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NULL ;</span><br></pre></td></tr></table></figure>

<p><strong>安全等于介绍</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#安全等于  &lt;=&gt;</span><br><span class="line"># 案例1:查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct &lt;=&gt; NULL ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2；查询工资为12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt;=&gt; 12000 ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#1.查询没有奖金，且工资小于18000的sqlary,last_name</span><br><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  last_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NULL </span><br><span class="line">  AND salary &lt; 18000 ;</span><br><span class="line"></span><br><span class="line">#2.查询employees表中，job_id不为&apos;IT&apos; 或者工资为12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id &lt;&gt; &apos;IT&apos; </span><br><span class="line">  OR salary = 12000 ;</span><br><span class="line"></span><br><span class="line">#3.查询部门departments表中涉及到了哪些位置编号</span><br><span class="line">SELECT DISTINCT location_id</span><br><span class="line">FROM departments;</span><br><span class="line"></span><br><span class="line">#4.面试题:</span><br><span class="line">#试问:select * from employees和 select * from employees where comission_pct like &apos;%%&apos; and last_name like &apos;%%&apos;;结果是否一样?</span><br><span class="line"> SELECT * FROM employees ;</span><br><span class="line"> SELECT * FROM employees WHERE commission_pct LIKE </span><br><span class="line"> &apos;%%&apos; AND last_name LIKE &apos;%&apos;;</span><br><span class="line">#不一样，如果判断的字段有null值，比如说上面的奖金，结果就不一样</span><br></pre></td></tr></table></figure>

<p><strong>排序查询</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#进阶3:排序查询 </span><br><span class="line">/*</span><br><span class="line"></span><br><span class="line">引入:</span><br><span class="line">  select * from employees;</span><br><span class="line">  语法:</span><br><span class="line">      select 查询列表 </span><br><span class="line">      from 表</span><br><span class="line">      where   筛选条件</span><br><span class="line">      order by 排序列表  asc|desc   </span><br><span class="line">*/</span><br><span class="line">#案例:查询员工信息，要求工资从高到低排序,不写默认是升序</span><br><span class="line">SELECT * FROM employees</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line">#低到高:</span><br><span class="line">SELECT * FROM employees</span><br><span class="line">ORDER BY salary ASC;</span><br></pre></td></tr></table></figure>

<p>排序查询实例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#案例2：查询部门编号&gt;=90的员工信息，按入职时间的先后进行排序</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees WHERE department_id&gt;=90 </span><br><span class="line">ORDER BY hiredate   ASC;</span><br><span class="line"></span><br><span class="line">#案例3:按年薪的高低显示员工的信息和年薪 按表达式排序</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1+ IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary * 12 * (1+ IFNULL(commission_pct, 0))</span><br><span class="line">DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例3:按年薪的高低显示员工的信息和年薪 按别名排序</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1+ IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY 年薪</span><br><span class="line">DESC;</span><br><span class="line">#案例5：按姓名的长度显示员工的姓名和工资  (按函数排序)</span><br><span class="line">SELECT LENGTH(last_name) 字节长度,last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY 字节长度 DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例6；查询员工信息，要求先按工资排序，再按员工编号排序，按多个字段排序</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC,</span><br><span class="line">  employee_id DESC ;</span><br></pre></td></tr></table></figure>

<p>实例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.查询员工的姓名部门号和年薪，按年薪降序，按姓名升序</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_id,salary*12*(1+IFNULL(commission_pct,0)) 年薪</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY 年薪  DESC, last_name ASC;</span><br><span class="line"></span><br><span class="line">#2.选择工资不在8000到17000的员工的姓名和工资，按工资降序 </span><br><span class="line">SELECT last_name,salary </span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary NOT BETWEEN 8000 AND 17000</span><br><span class="line">ORDER BY salary DESC;</span><br><span class="line"></span><br><span class="line">#3.查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</span><br><span class="line">SELECT </span><br><span class="line">  * ,LENGTH(email)</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &apos;%e%&apos; </span><br><span class="line">ORDER BY LENGTH(email) DESC,</span><br><span class="line">  department_id ASC ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-1-5-常见函数介绍"><a href="#1-1-5-常见函数介绍" class="headerlink" title="1.1.5 常见函数介绍"></a>1.1.5 常见函数介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#常见函数</span><br><span class="line">/*</span><br><span class="line">功能:类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名，</span><br><span class="line">好处:1.隐藏了实现细节</span><br><span class="line">     2.提高代码的重用性</span><br><span class="line">调用: select 函数名(实参列表) (from  表);</span><br><span class="line">特点:</span><br><span class="line">1.叫什么(函数名)</span><br><span class="line">2.干什么(函数功能)</span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line">  1.单行函数</span><br><span class="line">  如 concat,length,ifnull等 </span><br><span class="line">  2.分组函数</span><br><span class="line">  功能:做统计使用，又称为统计函数，组函数</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p><strong>单行函数分类</strong></p>
<p>字符函数</p>
<p>数字函数</p>
<p>日期函数</p>
<p>其他函数</p>
<p>流程控制函数</p>
<p><strong>1.字符函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#1.字符函数</span><br><span class="line">#length 获取参数值的字节个数</span><br><span class="line">SHOW VARIABLES LIKE &apos;%char%&apos;</span><br><span class="line"></span><br><span class="line">#2.concat 拼接字符串</span><br><span class="line">SELECT CONCAT(last_name,&apos;_&apos;,first_name) FROM employees;</span><br><span class="line"></span><br><span class="line">#3.upper lower  变大写和小写</span><br><span class="line">SELECT UPPER(&apos;john&apos;);</span><br><span class="line">SELECT LOWER(&apos;joHn&apos;);</span><br><span class="line">#示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT CONCAT (UPPER(last_name),LOWER(first_name)) 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#4.substr、substring</span><br><span class="line">#注意:mysql中索引从1开始，截取后面所有的值</span><br><span class="line">SELECT SUBSTR(&apos;李sdfad莫愁111&apos;,7) out_put;</span><br><span class="line">#第三个数字代表的是长度，不是最后索引</span><br><span class="line">SELECT SUBSTR(&apos;李sdfad莫愁111&apos;,7,2) out_put;</span><br><span class="line"></span><br><span class="line">#案例:姓名中首字符大写，其他字符小写然后用_拼接，显示出来</span><br><span class="line"></span><br><span class="line">SELECT CONCAT (UPPER(SUBSTR(last_name,1,1)),&apos;_&apos;,LOWER(SUBSTR(last_name,2))) out_put</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#instr </span><br><span class="line">#用于返回子串在父串的起始索引</span><br><span class="line"></span><br><span class="line">SELECT INSTR(&apos;杨六侠&apos;,&apos;六侠&apos;) AS out_put;</span><br><span class="line"></span><br><span class="line">#trim  不将空格记入</span><br><span class="line"></span><br><span class="line">SELECT LENGTH (TRIM(&apos; &apos;)) AS out_put;</span><br><span class="line"></span><br><span class="line">SELECT TRIM (&apos;aa&apos; FROM  &apos;aaaaaa张aaaa翠山aaaaaa&apos;) AS out_put;</span><br><span class="line"></span><br><span class="line">#lpad 指用指定的字符实现左填充指定长度</span><br><span class="line">SELECT LPAD(&apos;素素&apos;,10,&apos;*&apos;)AS out_put;</span><br><span class="line">#rpad 指用指定的字符实现右填充指定长度</span><br><span class="line">SELECT RPAD(&apos;素素&apos;,1,&apos;*&apos;)AS out_put;</span><br></pre></td></tr></table></figure>

<p><strong>数字函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#二 数学函数</span><br><span class="line"></span><br><span class="line">#round四舍五入</span><br><span class="line">SELECT ROUND(1.65);</span><br><span class="line"></span><br><span class="line">#ceil 向上取整</span><br><span class="line">SELECT CEIL (1.001);</span><br><span class="line"></span><br><span class="line">#floor 向下取整,返回&lt;=该参数的最大整数</span><br><span class="line">SELECT FLOOR(-9.99);</span><br><span class="line"></span><br><span class="line">#truncate 截断</span><br><span class="line"></span><br><span class="line">SELECT TRUNCATE(1.65,2);//输出1.65，取了两位</span><br><span class="line"></span><br><span class="line">#mod取余</span><br><span class="line"></span><br><span class="line">SELECT MOD(10,3);</span><br></pre></td></tr></table></figure>

<p><strong>日期函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#now 返回当前系统日期+时间</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#curdate 返回当前系统日期，不包含时间</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"></span><br><span class="line">#curtime 返回当前时间，不包含日期</span><br><span class="line">SELECT CURTIME();</span><br><span class="line"></span><br><span class="line">#可以获取指定的部分，年，月，日，小时，分钟，秒</span><br><span class="line">SELECT YEAR(NOW())年;</span><br><span class="line">SELECT YEAR(&apos;1000-1-1&apos;)年;</span><br><span class="line"></span><br><span class="line">SELECT YEAR(hiredate)年 FROM employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW())月;</span><br><span class="line">SELECT MONTHNAME(NOW())月;</span><br></pre></td></tr></table></figure>

<p>其它日期函数:</p>
<p>now:获取当前日期</p>
<p>str_to_date:将日期格式的字符转换成指定格式的日期</p>
<p>STR_TO_DATE(‘9-13-1999’,’%m-%d-%Y’)        输出:  1999-09-13</p>
<p>date_format:将日期转换成字符</p>
<p>DATE_FORMAT(‘2018/6/6’,’%Y年%m月%d日’)     2018年06月06日</p>
<p><img src="https://i.loli.net/2019/11/05/awoLZfx8zneQki6.png" alt="2.png"></p>
<hr>
<h2 id="1-1-6-流程控制函数"><a href="#1-1-6-流程控制函数" class="headerlink" title="1.1.6 流程控制函数"></a>1.1.6 流程控制函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.if函数 :if else的效果</span><br><span class="line"></span><br><span class="line">SELECT IF (10&lt;5,&apos;大&apos;,&apos;小&apos;);</span><br><span class="line"></span><br><span class="line">SELECT last_name,commission_pct,IF(commission_pct IS NULL</span><br><span class="line">,&apos;没奖金,呵呵&apos;,&apos;有奖金嘻嘻&apos;)  备注  FROM employees;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-1-7-case函数"><a href="#1-1-7-case函数" class="headerlink" title="1.1.7 case函数"></a>1.1.7 case函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">#case函数的使用1：switch case 的效果</span><br><span class="line">/*</span><br><span class="line"> awitch(变量或表达式)&#123;</span><br><span class="line">	cace 常量1:</span><br><span class="line">	语句1;</span><br><span class="line">        break;</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	default:语句a;break;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> mysql中</span><br><span class="line"> case 要判断的字段或表达式</span><br><span class="line"> when 常量1: then 要显示的值1或语句1;</span><br><span class="line"> when 常量2: then 要显示的值1或语句1;</span><br><span class="line"> ...</span><br><span class="line"> else 要显示的值n或语句n;</span><br><span class="line"> end</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">#案例:查询员工的工资，要求</span><br><span class="line">/*</span><br><span class="line">部门号=30,显示的工资为1.1倍</span><br><span class="line">部门号=40,显示的工资为1.2倍</span><br><span class="line">部门号=50,显示的工资为1.3倍 </span><br><span class="line">其它部门显示为原工资</span><br><span class="line">*/</span><br><span class="line">SELECT salary 原始工资,department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary </span><br><span class="line">END AS  新工资</span><br><span class="line">FROM  employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">case函数的使用二：类似于多重if</span><br><span class="line">java中：</span><br><span class="line">if(条件 i)&#123;</span><br><span class="line">     语句1;</span><br><span class="line">&#125;else if(条件2)&#123;</span><br><span class="line">     语句2;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">else&#123;</span><br><span class="line">     语句n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql中:</span><br><span class="line"></span><br><span class="line">case when 条件1 then 要显示的值1或语句1</span><br><span class="line">when 条件2  then 要显示的值2或语句2</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例:查询员工的工资的情况</span><br><span class="line">/*</span><br><span class="line">如果工资&gt;20000,显示A级别</span><br><span class="line">如果工资&gt;15000,显示B级别</span><br><span class="line">如果工资&gt;10000,显示C级别</span><br><span class="line">否则，显示D级别</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">SELECT salary,</span><br><span class="line">CASE </span><br><span class="line">WHEN salary&gt;20000 THEN &apos;A&apos;</span><br><span class="line">WHEN salary&gt;15000 THEN &apos;B&apos;</span><br><span class="line">WHEN salary&gt;10000 THEN &apos;C&apos;</span><br><span class="line">ELSE &apos;D&apos;</span><br><span class="line">END AS 工资级别</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<h2 id="1-1-8-单选函数总结"><a href="#1-1-8-单选函数总结" class="headerlink" title="1.1.8 单选函数总结"></a>1.1.8 单选函数总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">常见函数:</span><br><span class="line">	字符函数:</span><br><span class="line">	length</span><br><span class="line">	concat </span><br><span class="line">	substr </span><br><span class="line">	instr </span><br><span class="line">	trim </span><br><span class="line">	upper</span><br><span class="line">	lower</span><br><span class="line">	lpad</span><br><span class="line">	rpad</span><br><span class="line">	replace</span><br><span class="line">	</span><br><span class="line">	数字函数:</span><br><span class="line">	round</span><br><span class="line">	ceil</span><br><span class="line">	floor</span><br><span class="line">	truncate</span><br><span class="line">	mod</span><br><span class="line">	</span><br><span class="line">	日期函数:</span><br><span class="line">	now </span><br><span class="line">	curdate</span><br><span class="line">	curtime</span><br><span class="line">	year</span><br><span class="line">	month</span><br><span class="line">	monthname</span><br><span class="line">	day </span><br><span class="line">	hour</span><br><span class="line">	minute</span><br><span class="line">	second</span><br><span class="line">	str_to_date</span><br><span class="line">	date_format</span><br><span class="line">	</span><br><span class="line">	其他函数：</span><br><span class="line">	version</span><br><span class="line">	database</span><br><span class="line">	user</span><br><span class="line">	</span><br><span class="line">	控制函数:</span><br><span class="line">	if </span><br><span class="line">	case</span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-1-9-单选函数案例"><a href="#1-1-9-单选函数案例" class="headerlink" title="1.1.9 单选函数案例"></a>1.1.9 单选函数案例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#4.做一个查询，产生下面的结果</span><br><span class="line">&lt;last_name&gt;earns &lt;salary&gt; monthly but wants &lt;salary(3&gt;</span><br><span class="line">Dream Salary</span><br><span class="line">Ring earns 24000 monthly but wants 72000</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    last_name,</span><br><span class="line">    &apos;earns&apos;,</span><br><span class="line">    salary,</span><br><span class="line">    &apos;monthly </span><br><span class="line">but wants&apos;,</span><br><span class="line">    salary * 3</span><br><span class="line">  ) AS &quot;Dream Salary&quot; </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-0-分组函数的介绍"><a href="#1-2-0-分组函数的介绍" class="headerlink" title="1.2.0 分组函数的介绍"></a>1.2.0 分组函数的介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#二.  分组函数</span><br><span class="line">/*</span><br><span class="line">功能:用作统计使用，又称为聚合函数或统计函数或组函数</span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line">sum 求和、avg 平均值、min最小值、count计算个数</span><br><span class="line"></span><br><span class="line">特点:</span><br><span class="line">1.sum、avg 一般用于处理数值型</span><br><span class="line">max、min、count可以处理任何类型</span><br><span class="line"></span><br><span class="line">2.是否忽略null值</span><br><span class="line">以上分组函数都忽略null值</span><br><span class="line"></span><br><span class="line">3.可以和distinct搭配使用</span><br><span class="line"></span><br><span class="line">4.count函数的具体介绍</span><br><span class="line">#一般用count(*)统计行数</span><br><span class="line">SELECT COUNT(*)FROM employees;</span><br><span class="line"></span><br><span class="line"># 和分组函数一同查询的字段要求是grounp by后的字段</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">#1.简单的使用</span><br><span class="line">SELECT </span><br><span class="line">  SUM(salary) 和,</span><br><span class="line">  AVG(salary) 平均,</span><br><span class="line">  MIN(salary) 最高,</span><br><span class="line">  MAX(salary) 最低,</span><br><span class="line">  COUNT(salary) 个数 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-1-分组函数的实例"><a href="#1-2-1-分组函数的实例" class="headerlink" title="1.2.1 分组函数的实例"></a>1.2.1 分组函数的实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#1.查询公司员工工资的最大值，最小值，平均值，总和</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary) mx_sal,</span><br><span class="line">  MIN(salary) mi_sal,</span><br><span class="line">  AVG(salary) ag_sal,</span><br><span class="line">  SUM(salary) sm_sal </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">#2.查询员工表中的最大入职时间和最小入职时间的相差天数</span><br><span class="line">MAX(hiredate) MIN(hiredate) </span><br><span class="line">SELECT </span><br><span class="line">  DATEDIFF(NOW(), &apos;1996-07-17&apos;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  DATEDIFF(MAX(hiredate), MIN(hiredate)) differenc</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">#3.查询部门编号为90的员工个数</span><br><span class="line">SELECT COUNT(*)个数 </span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id =90;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-2-分组查询的介绍"><a href="#1-2-2-分组查询的介绍" class="headerlink" title="1.2.2 分组查询的介绍"></a>1.2.2 分组查询的介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#分组查询</span><br><span class="line">/*</span><br><span class="line">语法:</span><br><span class="line">select 分组函数，列(要求出现的group by的后面)</span><br><span class="line">from 表</span><br><span class="line"> [where 筛选条件]</span><br><span class="line"> group by 分组的列表</span><br><span class="line"> [order by 子句]</span><br><span class="line"> 注意:</span><br><span class="line">   查询列表比较特殊，要求是分组函数和group by 后出现的字段 </span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p><strong>添加筛选条件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line"></span><br><span class="line">语法:</span><br><span class="line">	select 分组函数，列(要求出现在group by的后面)</span><br><span class="line">	from表</span><br><span class="line">	[where 筛选条件]</span><br><span class="line">	group by 分组的列表</span><br><span class="line">	[order by子句]</span><br><span class="line">注意:</span><br><span class="line">	查询列表必须特殊,要求是分组函数和</span><br><span class="line">	group by后出现的字段 </span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例1.:查询每个工种的最高工资</span><br><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#案例2:查询每个位置上的部门个数</span><br><span class="line">SELECT COUNT(*),location_id </span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line">#添加筛选条件</span><br><span class="line">#案例1:查询邮箱中包含a字符的,每个部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE &apos;%a%&apos;</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2:查询有奖金的每个领导手下员工的最高工资</span><br><span class="line"></span><br><span class="line">SELECT MAX(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#添加分组后的筛选条件</span><br><span class="line">#案例1:查询哪个部门的员工个数&gt;2</span><br><span class="line">#1.查询每个部门的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line">#2.根据1结果进行筛选，查询哪个部门的员工个数&gt;2</span><br><span class="line">SELECT COUNT(*),department_id </span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line">#案例2:查询每个工种有奖金的员工的最高工资&gt;12000工种编号</span><br><span class="line">#和最高工资</span><br><span class="line"></span><br><span class="line">#1.查询每个工种有奖金的员工的最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id </span><br><span class="line"></span><br><span class="line">#根据1结果继续筛选，最高工资&gt;12000</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id </span><br><span class="line">HAVING MAX(salary)&gt;12000;</span><br><span class="line"></span><br><span class="line">/*案例3:查询领导的编号&gt;102的每个领导手下的最低工资&gt;5000</span><br><span class="line">的领导编号是哪个，以及其最低工资</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.查询领导的编号&gt;102的每个领导手下的最低工资</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY manager_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.添加筛选条件:编号&gt;102</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id&gt;102</span><br><span class="line">GROUP BY manager_id</span><br><span class="line"></span><br><span class="line">#3.添加筛选条件：最低工资&gt;5000</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id&gt;102</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING MIN(salary)&gt;5000;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#特点:</span><br><span class="line">#1.分组查询中的筛选条件分为两类  </span><br><span class="line">/*</span><br><span class="line"></span><br><span class="line">		数据源  	   位置   	   	关键字</span><br><span class="line">分组前筛选 	原始表		  group by子句的前面     where</span><br><span class="line">分组后筛选      分组后的结果集	  group by子句的后面	 having</span><br><span class="line">一:</span><br><span class="line">1.分组函数做条件肯定是放在having子句中</span><br><span class="line">2.能用分组前筛选的，就优先考虑使用分组前筛选</span><br><span class="line"></span><br><span class="line">二:</span><br><span class="line">group  by 子句支持单个字段分组，多个字段分组(多个字段之间</span><br><span class="line">用逗号隔开没有顺序要求),表达式或函数(用得较少)</span><br><span class="line"></span><br><span class="line">3.也可以添加排序(排序放在整个分组查询的最后)</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#按表达式或函数分组</span><br><span class="line">#案例:按员工姓名的长度分组，查询每一组的员工个数，筛选员工</span><br><span class="line">#个数&gt;5的有哪些</span><br><span class="line">#1.查询每个长度的员工个数</span><br><span class="line">SELECT COUNT(*),LENGTH(last_name) len_name</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY LENGTH(last_name)</span><br><span class="line">#2.添加筛选条件 </span><br><span class="line">HAVING COUNT(*)&gt;5;</span><br><span class="line"></span><br><span class="line">#按多个字段分组</span><br><span class="line">#案例:查询每个部门每个工种的员工的平均工资</span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees </span><br><span class="line">GROUP BY department_id,job_id;</span><br><span class="line"></span><br><span class="line">#添加排序</span><br><span class="line">#案例:查询每个部门每个工种的员工的平均工资，并且按</span><br><span class="line">#平均工资的高低显示</span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IS NOT NULL</span><br><span class="line">GROUP BY job_id,department_id</span><br><span class="line">HAVING AVG(salary)&gt;10000</span><br><span class="line">ORDER BY AVG(salary) DESC;</span><br></pre></td></tr></table></figure>

<p><strong>分组查询案例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#1.查询job_id的员工工资的最大值，最小值，平均值，总和，并按job_id升序</span><br><span class="line">SELECT MAX(salary),MIN(salary),AVG(salary),SUM(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id</span><br><span class="line">ORDER BY job_id ASC;</span><br><span class="line"></span><br><span class="line">#2.查询员工最高工资和最低工资的差距(difference)</span><br><span class="line"></span><br><span class="line">SELECT MAX(salary)-MIN(salary) diffrence</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.查询各个管理者手下员工的最低工资，其中最低工资</span><br><span class="line">#不能低于6000,没有管理者的员工不计算在内</span><br><span class="line"></span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id IS NOT NULL</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING MIN(salary)&gt;=6000;</span><br><span class="line"></span><br><span class="line">#4.查询所有部门的编号，员工数量和工资平均值，并按平均工资降序 </span><br><span class="line">SELECT department_id,COUNT(*),AVG(salary) a</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">ORDER BY a DESC;</span><br><span class="line"></span><br><span class="line">#5.选择具有各个job_id的员工人数</span><br><span class="line">SELECT COUNT(*) 个数, job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-3-连接查询的分类"><a href="#1-2-3-连接查询的分类" class="headerlink" title="1.2.3 连接查询的分类"></a>1.2.3 连接查询的分类</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#连接查询</span><br><span class="line">/*</span><br><span class="line">含义:又称为多表查询，当查询的字段来自多个表时，就会用到连接查询 </span><br><span class="line"></span><br><span class="line">笛卡乐乘积现象:表1 有m行，表2有n行，结果=m*n行</span><br><span class="line"></span><br><span class="line">发生原因:没有有效的连接条件</span><br><span class="line">如何避免:添加有效的连接条件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line">	按年代分类:</span><br><span class="line">	</span><br><span class="line">	sql192标准:mysql中仅仅支持内连接</span><br><span class="line">	sql199标准：支持内连接+外连接(左外和右外)+交叉连接</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	按功能分类:</span><br><span class="line">	内连接：</span><br><span class="line">		等值连接</span><br><span class="line">		非等值连接</span><br><span class="line">		自连接</span><br><span class="line">	外连接:</span><br><span class="line">		左外连接</span><br><span class="line">		右外连接</span><br><span class="line">		全外连接</span><br><span class="line">		</span><br><span class="line">	交叉连接:</span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p><strong>等值连接</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.等值连接</span><br><span class="line">/*</span><br><span class="line">1.多表等值连接的结果为多表的交集部分</span><br><span class="line">2.n表连接，至少需要n-1个连接条件</span><br><span class="line">3.多表的顺序没有要求</span><br><span class="line">4.一般需要为表起别名</span><br><span class="line">5.可以搭配前面介绍的所有子名使用，比如排序，分组，筛选</span><br><span class="line">*/</span><br><span class="line">SELECT NAME,boyName</span><br><span class="line">FROM boys,beauty</span><br><span class="line">WHERE beauty.boyfriend_id=boys.id;</span><br><span class="line"></span><br><span class="line">#案例2:查询员工名和对应的部门名</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees,departments</span><br><span class="line">WHERE employees.`department_id`=departments.`department_id`;</span><br><span class="line"></span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">SELECT e.last_name,e.job_id,job_title</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.`job_id`=j.`job_id`;</span><br></pre></td></tr></table></figure>

<p><strong>等值连接的示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#两个表的顺序是否可以调换 可以</span><br><span class="line">#可以加筛选么？   可以</span><br><span class="line">#案例:查询有奖金的员工名、部门名</span><br><span class="line">SELECT last_name,department_name,commission_pct</span><br><span class="line">FROM employees e,departments d </span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND e.`commission_pct` IS NOT NULL;</span><br><span class="line"></span><br><span class="line">#案例2：查询城市名中第二人字符为o的部门名和城市名</span><br><span class="line">SELECT department_name,city</span><br><span class="line">FROM departments d,locations l</span><br><span class="line">WHERE d.`location_id`= l.`location_id`</span><br><span class="line">AND city LIKE &apos;_o%&apos;;</span><br><span class="line"></span><br><span class="line">#可以加分组？</span><br><span class="line"></span><br><span class="line">#案例1：查询每个城市的部门个数</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) 个数,city</span><br><span class="line">FROM departments d, locations l</span><br><span class="line">WHERE d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city ;</span><br><span class="line"></span><br><span class="line">#案例2：查询有奖金的每个部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT department_name,d.manager_id,MIN(salary)</span><br><span class="line">FROM departments d,employees e</span><br><span class="line">WHERE d.`department_id`=e.`department_id`</span><br><span class="line">AND commission_pct IS NOT NULL</span><br><span class="line">GROUP BY department_name,d.manager_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#可以加排序 </span><br><span class="line">#案例:查询每个工种的工种名和员工的个数，并且按员工个数降序 </span><br><span class="line">SELECT job_title,COUNT(*)</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.`job_id`=j.`job_id`</span><br><span class="line">GROUP BY job_title</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#可以实现三表连接</span><br><span class="line">#案例：查询员工名、部门名和所在的城市 </span><br><span class="line">SELECT last_name,department_name,city</span><br><span class="line">FROM employees e, departments d,locations l </span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND d.`location_id`=l.`location_id`</span><br></pre></td></tr></table></figure>

<h4 id="1-复习"><a href="#1-复习" class="headerlink" title="1.复习"></a>1.复习</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"></span><br><span class="line">一:语法</span><br><span class="line">select 查询列表 </span><br><span class="line">from 表</span><br><span class="line">where 筛选条件 </span><br><span class="line">order by 排序列表 (asc|desc)</span><br><span class="line"></span><br><span class="line">二:特点 </span><br><span class="line">1.asc:升序,如果不写默认升序 </span><br><span class="line"></span><br><span class="line">desc:降序 </span><br><span class="line"></span><br><span class="line">2.排序列表 支持 单个字段，多个字段，函数，表达式，别名</span><br><span class="line"></span><br><span class="line">3.order by 的位置一般放在查询语句的最后 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二.常见函数</span><br><span class="line">1.</span><br><span class="line">功能：类似于java中的方法</span><br><span class="line">好处：提高重用性和隐藏实现细节</span><br><span class="line">调用：select 函数名(实参列表)</span><br><span class="line">2.单选函数</span><br><span class="line">1.字符函数</span><br><span class="line">comcat:连接</span><br><span class="line">substr:截取子串</span><br><span class="line">upper:变大写</span><br><span class="line">lower:变小写</span><br><span class="line">replace:替换 </span><br><span class="line">length:获取字节长度</span><br><span class="line">trim:去前后空格</span><br><span class="line">lpad:左填充</span><br><span class="line">rpad:右填充</span><br><span class="line">instr:获取子串第一次出现的索引</span><br><span class="line"></span><br><span class="line">2.数学函数</span><br><span class="line">ceil:向上取整</span><br><span class="line">round:四舍五入</span><br><span class="line">mod:取模</span><br><span class="line">floor:向下取整</span><br><span class="line">truncate:截断</span><br><span class="line">rand:获取随机数，返回0到1之间小数</span><br><span class="line"></span><br><span class="line">3.日期函数</span><br><span class="line">now:返回当前日期+时间</span><br><span class="line">year:返回年</span><br><span class="line">month:返回日</span><br><span class="line">day:返回日</span><br><span class="line">date_format:将日期转换成字符</span><br><span class="line">curdate:返回当前日期</span><br><span class="line">str_to_date:将字符转换成日期</span><br><span class="line">curtime:返回当前时间</span><br><span class="line">hour:小时</span><br><span class="line">minute:分钟</span><br><span class="line">second:秒</span><br><span class="line">dateduff:返回两个日期相差的天数</span><br><span class="line">monthname:以英文形式返回月</span><br><span class="line"></span><br><span class="line">4.其他函数</span><br><span class="line">version 当前版本</span><br><span class="line">database  当前打开的数据库</span><br><span class="line">user 当前用户</span><br><span class="line">password(&apos;字符&apos;)/md5()也是:返回该字符的密码形式</span><br><span class="line"></span><br><span class="line">5.流程控制函数</span><br><span class="line">1.if(条件表达式,表达式1,表达式2):如果条件表达式成立，</span><br><span class="line">返回表达式1,否则返回表达式2</span><br><span class="line">2.case情况1</span><br><span class="line">case 变量或表达式或字段</span><br><span class="line">when 常量1 then  值1</span><br><span class="line">when 常量2 then  值2</span><br><span class="line">...</span><br><span class="line">else  值n</span><br><span class="line">end </span><br><span class="line"></span><br><span class="line">///</span><br><span class="line">case情况2</span><br><span class="line"></span><br><span class="line">case变量或表达式或字段 </span><br><span class="line">when 条件1  then 值1</span><br><span class="line">when 条件2  then 值2</span><br><span class="line">...</span><br><span class="line">else  值n</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">三.分组函数</span><br><span class="line">1.分类</span><br><span class="line">max最大值</span><br><span class="line">min最小值</span><br><span class="line">sum和</span><br><span class="line">avg平均值</span><br><span class="line">count计算个数</span><br><span class="line"></span><br><span class="line">2.特点</span><br><span class="line">1.语法</span><br><span class="line">select max(字段) from 表名;</span><br><span class="line"></span><br><span class="line">2.支持的类型</span><br><span class="line">sum和avg一般用于处理数值型</span><br><span class="line">max，min，count可以处理任何数据类型</span><br><span class="line"></span><br><span class="line">3.以上分组函数都忽略null</span><br><span class="line">4.都可以搭配distinct使用,实现去重的统计 </span><br><span class="line">select sum(distinct 字段)from 表;</span><br><span class="line"></span><br><span class="line">4.count函数</span><br><span class="line">count(字段):统计该字段非空值的个数</span><br><span class="line">count(*):统计结果集的行数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5.和分组函数一同查询的字段，要求是group by后出现的字段</span><br><span class="line"></span><br><span class="line">分组查询</span><br><span class="line"></span><br><span class="line">一.语法</span><br><span class="line">select 分组函数,分组后的字段 </span><br><span class="line">from 表</span><br><span class="line">[where　筛选条件]</span><br><span class="line">group by 分组的字段</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序列表]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二。特点 </span><br><span class="line">		使用关键字       筛选的表    	   位置</span><br><span class="line">分组前筛选	where  		原始表	   	group  by的前面 </span><br><span class="line">分组后筛选	having		分组后的结果     group by的后面</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">连接查询</span><br><span class="line">一.当查询中涉及到了多个表的字段，需要使用多表连接</span><br><span class="line">select 字段1,字段2</span><br><span class="line">from 表1,表2...</span><br><span class="line">笛卡乐乘积:当查询多个表时，没有添加有效的连接条件，导致</span><br><span class="line">多个表所有行实现完全连接</span><br><span class="line">如何解决:添加有效的连接条件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二.分类</span><br><span class="line">按年代分类：</span><br><span class="line">sql92:</span><br><span class="line">	等值</span><br><span class="line">	非等值</span><br><span class="line">	自连接</span><br><span class="line">	</span><br><span class="line">	也支持一部分外连接(用于oracle,sqlserver,mysql)</span><br><span class="line">sql99:</span><br><span class="line">	内连接</span><br><span class="line">		等值</span><br><span class="line">		非等值</span><br><span class="line">		自连接</span><br><span class="line">	外连接</span><br><span class="line">		左外</span><br><span class="line">		右外</span><br><span class="line">		全外(mysql不支持)</span><br><span class="line">	交叉连接</span><br><span class="line">		</span><br><span class="line">三.sql92语法</span><br><span class="line">1.等值连接</span><br><span class="line">	select 查询列表 </span><br><span class="line">	from 表1 别名,表2 别名</span><br><span class="line">	where  表1.key = 表2.key</span><br><span class="line">	[and 筛选条件]</span><br><span class="line">	[group by 分组字段]</span><br><span class="line">	[having 分组后的筛选]</span><br><span class="line">	[order by 排序字段]</span><br><span class="line">特点:</span><br><span class="line">1.一般为表起别名</span><br><span class="line">2.多表顺序可以调换</span><br><span class="line">3.n表连接至少需要n-1个连接条件</span><br><span class="line">4.等值连接的结果是多表的交集部分</span><br><span class="line"></span><br><span class="line">2.非等值连接</span><br><span class="line">	select 查询列表 </span><br><span class="line">	from 表1 别名,表2 别名</span><br><span class="line">	where  非等值的连接条件 </span><br><span class="line">	[and 筛选条件]</span><br><span class="line">	[group by 分组字段]</span><br><span class="line">	[having 分组后的筛选]</span><br><span class="line">	[order by 排序字段]</span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<p>练习题:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.显示员工的姓名，部门号和部门名称 </span><br><span class="line">USE myemployees;</span><br><span class="line">SELECT last_name,d.department_id,department_name</span><br><span class="line">FROM employees e, departments d</span><br><span class="line">WHERE e.`department_id` = d.`department_id`;</span><br><span class="line"></span><br><span class="line">#2.查询90号部门员工的job_id和90号部门的location_id</span><br><span class="line"></span><br><span class="line">SELECT job_id,location_id</span><br><span class="line">FROM employees e,departments d </span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND e.`department_id`=09</span><br><span class="line"></span><br><span class="line">#3.选择有奖金的员工的 last_name,department_name,location_id,city</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,l.location_id,city</span><br><span class="line">FROM employees e,departments d,locations l</span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND e.`commission_pct` IS NOT NULL;</span><br><span class="line"></span><br><span class="line">#4.选择city在Toronto工作的员工的信息</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_id,d.department_id,department_name</span><br><span class="line">FROM employees e,departments d ,locations l</span><br><span class="line">WHERE e.`department_id` = d.`department_id`</span><br><span class="line">AND d.`location_id`  = l.`location_id`</span><br><span class="line">AND city = &apos;Toronto&apos;</span><br><span class="line"></span><br><span class="line">#5.查询每个工种，每个部门名，工种名和最低工资</span><br><span class="line"></span><br><span class="line">SELECT department_name,job_title,MIN(salary) 最低工资</span><br><span class="line">FROM employees e,departments d ,jobs j</span><br><span class="line">WHERE e.`department_id`=d.`department_id`</span><br><span class="line">AND e.`job_id`=j.`job_id`</span><br><span class="line">GROUP BY department_name,job_title;</span><br><span class="line"></span><br><span class="line">#6.查询每个国家下的部门个数大于2的国家编号 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  country_id,</span><br><span class="line">  COUNT(*) 部门个数 </span><br><span class="line">FROM</span><br><span class="line">  departments d,</span><br><span class="line">  locations l </span><br><span class="line">WHERE d.`location_id` = l.`location_id` </span><br><span class="line">GROUP BY country_id </span><br><span class="line">HAVING COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line">/*7.选择指定员工的姓名，员工号，以及他的管理者的姓名和</span><br><span class="line">员工号，结果类似于下面的格式</span><br><span class="line"></span><br><span class="line">employees   Emp  manager  Mgr </span><br><span class="line">kochhar     101    king    100</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  e.last_name employees,</span><br><span class="line">  e.employee_id &quot;Emp#&quot;,</span><br><span class="line">  m.last_name manager,</span><br><span class="line">  m.employee_id &quot;Mgr#&quot;</span><br><span class="line">  </span><br><span class="line">  FROM employees e, employees m </span><br><span class="line">  WHERE  e.manager_id =m.employee_id</span><br><span class="line">  AND e.last_name=&apos;kochhar&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-4-sql99语法"><a href="#1-2-4-sql99语法" class="headerlink" title="1.2.4 sql99语法"></a>1.2.4 sql99语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sql99语法 </span><br><span class="line">/*</span><br><span class="line">	select 查询列表</span><br><span class="line">	from 表1  别名   (连接类型)</span><br><span class="line">	join 表2   别名 </span><br><span class="line">	on       连接条件 </span><br><span class="line">	(where   筛选条件 )</span><br><span class="line">	(group  by 分组)</span><br><span class="line">	(having 筛选条件)</span><br><span class="line">	(order by 排序列表)</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">内连接 inner</span><br><span class="line"></span><br><span class="line">外连接</span><br><span class="line">	左外 left outer</span><br><span class="line">	右外 ringht outer </span><br><span class="line">	全外 full outer</span><br><span class="line">	</span><br><span class="line">交叉连接   cross </span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h2 id="1-2-5-等值连接"><a href="#1-2-5-等值连接" class="headerlink" title="1.2.5 等值连接"></a>1.2.5 等值连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#内连接</span><br><span class="line">/*</span><br><span class="line">语法:</span><br><span class="line">select 查询列表 </span><br><span class="line">from 表1  别名 </span><br><span class="line">inner join 表2 别名 </span><br><span class="line">on 连接条件;</span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line">等值</span><br><span class="line">非等值</span><br><span class="line">自连接 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.添加排序、分组、筛选</span><br><span class="line">2.inner可以省略</span><br><span class="line">3.筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</span><br><span class="line">4.inner join连接和sql92语法的效果一样</span><br><span class="line">*/		</span><br><span class="line"></span><br><span class="line">#等值连接 案例</span><br><span class="line">#1.查询员工名和工种名(筛选)</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN departments d </span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br><span class="line"></span><br><span class="line">#2.查询名字中包含e的员工和工种名(添加筛选)</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_title </span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN jobs  j </span><br><span class="line">ON e.`job_id` = j.`job_id`</span><br><span class="line">WHERE e.`last_name` LIKE &apos;%e%&apos;;</span><br><span class="line"></span><br><span class="line">#3.查询部门个数&gt;3的城市名和部门个数(添加分组+筛选)</span><br><span class="line">/*</span><br><span class="line">思路:</span><br><span class="line">1.查询每个城市的部门个数</span><br><span class="line">2.在1结果上筛选满足条件的</span><br><span class="line">*/</span><br><span class="line">SELECT city,COUNT(*) 部门个数</span><br><span class="line">FROM departments d </span><br><span class="line">INNER JOIN locations l </span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city</span><br><span class="line">HAVING COUNT(*)&gt;3;</span><br><span class="line"></span><br><span class="line">#4.查询哪个部门员工个数&gt;3的部门名和员工个数，并按个数降序</span><br><span class="line"></span><br><span class="line">#1.查询每个部门的员工个数</span><br><span class="line">SELECT COUNT(*),department_name</span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN departments d </span><br><span class="line">ON e.`department_id` =  d.`department_id`</span><br><span class="line">GROUP BY department_name</span><br><span class="line"></span><br><span class="line">#2.在1结果上筛选员工个数&gt;3的记录，并排序 </span><br><span class="line">SELECT COUNT(*) 个数,department_name</span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN departments d </span><br><span class="line">ON e.`department_id` =  d.`department_id`</span><br><span class="line">GROUP BY department_name</span><br><span class="line">HAVING COUNT(*)&gt;3</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#5.查询员工名、部门名、工种名、并按部门名降序 </span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,job_title</span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN departments d ON e.`department_id` = d.`department_id`</span><br><span class="line">INNER JOIN jobs j ON e.`job_id` = j.`job_id`</span><br><span class="line">ORDER BY department_name DESC;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-6-自连接"><a href="#1-2-6-自连接" class="headerlink" title="1.2.6 自连接"></a>1.2.6 自连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#自连接</span><br><span class="line"></span><br><span class="line">#查询员工的员工、上级的名字</span><br><span class="line"></span><br><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">FROM employees e </span><br><span class="line">JOIN employees m</span><br><span class="line">ON e.`manager_id` = m.`employee_id`;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-2-7-左右外连接"><a href="#1-2-7-左右外连接" class="headerlink" title="1.2.7 左右外连接"></a>1.2.7 左右外连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#二.外连接</span><br><span class="line">/*</span><br><span class="line">应用场景:用于查询一个表中有，另一个表没有的记录</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.外连接的查询结果为所有记录</span><br><span class="line">  如果从表中有和它匹配的，则显示匹配的值</span><br><span class="line">  如果从表中没有和它匹配的，则显示null</span><br><span class="line">  外连接查询结果=内连接结果+主表中有而从表没有的记录</span><br><span class="line"> 2.左外连接，left join  左边的是主表</span><br><span class="line">   右外连接，ringht  join 右边的是主表 </span><br><span class="line"> 3.左外和右外交换两个表的顺序，可以实现同样的效果</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例1：查询哪个部门没有员工 </span><br><span class="line"></span><br><span class="line">#左外</span><br><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM departments d </span><br><span class="line">LEFT OUTER JOIN employees  e </span><br><span class="line">ON d.`department_id`  = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#右外</span><br><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM employees e</span><br><span class="line">RIGHT OUTER JOIN departments  d</span><br><span class="line">ON d.`department_id`  = e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<p><strong>全外连接</strong>:</p>
<p>#全外</p>
<p>#全外=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p>
<hr>
<h2 id="1-2-8-子查询"><a href="#1-2-8-子查询" class="headerlink" title="1.2.8 子查询"></a>1.2.8 子查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#子查询 </span><br><span class="line">/*</span><br><span class="line">含义:</span><br><span class="line">出现在其他语句中的select语句,称为子查询或内查询</span><br><span class="line">外部的查询语句,称为主查询或外查询</span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line"></span><br><span class="line">按子查询出现的位置:</span><br><span class="line">	select后面：</span><br><span class="line">		仅仅支持标题子查询</span><br><span class="line">		</span><br><span class="line">	from后面：</span><br><span class="line">		支持表子查询 </span><br><span class="line">		</span><br><span class="line">	where或having后面：***</span><br><span class="line">		标量子查询(单行)*</span><br><span class="line">		列子查询(多行)*</span><br><span class="line">		</span><br><span class="line">		行子查询</span><br><span class="line">	exists后面(相关子查询 )：</span><br><span class="line">		表子查询</span><br><span class="line">按结果集的行列数不同:</span><br><span class="line">	标量子查询(结果集只有一行一列)</span><br><span class="line">	列子查询(结果集只有一列多行)</span><br><span class="line">	行子查询(结果集有一行多列)</span><br><span class="line">	表子查询(结果集一般为多行多列)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#例子:</span><br><span class="line">SELECT first_name FROM employees WHERE</span><br><span class="line">department_id IN(</span><br><span class="line">SELECT department_id FROM departments</span><br><span class="line">WHERE location_id =1700</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>where后面的标题子查询使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#一.where或having后面</span><br><span class="line">/*</span><br><span class="line">1.标量子查询(单行子查询)</span><br><span class="line">2.列子查询(多行子查询)</span><br><span class="line">3.行子查询(多列多行)</span><br><span class="line"></span><br><span class="line">特点:</span><br><span class="line">1.子查询放在小的括号内</span><br><span class="line">2.子查询一般放在条件的右侧 </span><br><span class="line">3.标量子查询，一般搭配着单行操作符使用</span><br><span class="line"></span><br><span class="line">&gt; &lt; &gt;= &lt;= = &lt;&gt;</span><br><span class="line"></span><br><span class="line">列子查询，一般搭配着多行操作符使用</span><br><span class="line">in、any/some、all</span><br><span class="line"></span><br><span class="line">4.子查询的执行优先于主查询执行，主查询的条件用</span><br><span class="line">到了子查询的结果</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.标题子查询 </span><br><span class="line">#案例1：谁的工资比Abel高？</span><br><span class="line"></span><br><span class="line">#1.查询Abel的工资</span><br><span class="line"></span><br><span class="line">SELECT salary </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name=&apos;Abel&apos;</span><br><span class="line"></span><br><span class="line">#2.查询员工的信息，满足salary&gt;1结果</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE last_name = &apos;Abel&apos;) ;</span><br><span class="line"></span><br><span class="line">#案例2：返回job_id与141号员工相同,salary比143号</span><br><span class="line">#员工多的员工 姓名，job_id 和工资</span><br><span class="line">#1.查询141号员工的job_id</span><br><span class="line"></span><br><span class="line">SELECT job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id =141;</span><br><span class="line">#2.查询143号员工的salary</span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id = 143</span><br><span class="line"></span><br><span class="line">#3.查询员工的姓名,job_id和工资,要求job_id=1并且salary&gt;2</span><br><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id=(</span><br><span class="line">SELECT job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id = 141</span><br><span class="line">)AND salary&gt;(</span><br><span class="line">SELECT	salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE	employee_id=143</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例3 返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line"></span><br><span class="line">#1.查询公司的最低工资</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line">#2.查询last_name,job_id和salary,要求salary=1</span><br><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary=(</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例4.查询最低工资大于50号部门最低工资的部门id和其最低工资</span><br><span class="line"></span><br><span class="line">#1.查询50号部门的最低工资</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id = 50</span><br><span class="line"></span><br><span class="line">#2.查询每个部门的最低工资</span><br><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line">#3.筛选2，满足min(salary)&gt;1的结果</span><br><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary)&gt;(</span><br><span class="line">    SELECT MIN(salary)</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE department_id = 50</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>where后面的列子查询使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#2.列子查询(多行子查询)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">返回多行</span><br><span class="line">使用多行比较操作符</span><br><span class="line"></span><br><span class="line">操作符   	      含义</span><br><span class="line">IN/NOT IN      等于列表中的任意一个</span><br><span class="line">ANY|SOME 	和子查询返回的某一个值比较 </span><br><span class="line">ALL		和子查询返回的所有值比较</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例1：返回location_id是1400或1700的部门中的所有员工姓名 </span><br><span class="line">#步骤:1.查询location_id是1400或1700的部门编号</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id IN(1400,1700);</span><br><span class="line">#2.查询员工姓名,要求部门号是1列表中的某一个</span><br><span class="line"></span><br><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例2：返回其它部门中比job_id为&apos;IT_PROG&apos;部门任一工资低的</span><br><span class="line">#员工的员工号、姓名、job_id以及salary</span><br><span class="line">#查询job_id为&apos;IT_PROG&apos;部门任一工资</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id =&apos;IT_PROG&apos;</span><br><span class="line"></span><br><span class="line">#2.查询员工号、姓名、job_id以及salary,salary&lt;1的任意一个 </span><br><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ANY(</span><br><span class="line">SELECT DISTINCT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id = &apos;IT_PROG&apos;</span><br><span class="line"></span><br><span class="line">) AND job_id&lt;&gt;&apos;IT_PROG&apos;;</span><br><span class="line"></span><br><span class="line">#案例3：返回其它部门中比job_id为&apos;IT_PROG&apos;部门所有工资</span><br><span class="line">#都低的员工的员工号，姓名、job_id以及salary</span><br></pre></td></tr></table></figure>

<h2 id="1-2-9-where后面的行子查询使用"><a href="#1-2-9-where后面的行子查询使用" class="headerlink" title="1.2.9 where后面的行子查询使用"></a>1.2.9 where后面的行子查询使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#3.行子查询(结果集一行多列或多行多列)</span><br><span class="line"></span><br><span class="line">#案例:查询员工编号最小并且工资最高的员工信息</span><br><span class="line"></span><br><span class="line">#步骤：1.查询最小的员工编号</span><br><span class="line">SELECT MIN(employee_id)</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line">#2.查询最高工资</span><br><span class="line">SELECT MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line">#3.查询员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id = </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(employee_id) </span><br><span class="line">  FROM</span><br><span class="line">    employees) </span><br><span class="line">  AND salary = </span><br><span class="line">  (SELECT </span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#用行子查询的方式来实现上面的代码,结果与上面的一样，用得较少 </span><br><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE(employee_id,salary)=(</span><br><span class="line">SELECT MIN(employee_id),MAX(salary)</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-0-select后面的子查询使用"><a href="#1-3-0-select后面的子查询使用" class="headerlink" title="1.3.0 select后面的子查询使用"></a>1.3.0 select后面的子查询使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#放在select后面</span><br><span class="line">/*</span><br><span class="line">仅仅支持标题子查询 </span><br><span class="line">*/</span><br><span class="line">#案例:查询每个部门的员工个数</span><br><span class="line"></span><br><span class="line">SELECT d.*,(</span><br><span class="line"></span><br><span class="line">	SELECT COUNT(*)</span><br><span class="line">	FROM employees  e</span><br><span class="line">	WHERE e.department_id = d.`department_id`</span><br><span class="line">	</span><br><span class="line">) 个数</span><br><span class="line">FROM departments d;</span><br><span class="line"></span><br><span class="line">#案例2：查询员工号=102的部门名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  (SELECT </span><br><span class="line">    department_name</span><br><span class="line">  FROM</span><br><span class="line">    departments d </span><br><span class="line">    INNER JOIN employees e </span><br><span class="line">      ON d.department_id = e.department_id </span><br><span class="line">  WHERE e.employee_id = 102) 部门名 ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#from后面</span><br><span class="line">/*</span><br><span class="line">将子查询结果充当一张表，要求必须起别名 </span><br><span class="line">*/</span><br><span class="line">#案例：查询每个部门的平均工资的工资等级 </span><br><span class="line"></span><br><span class="line">#查询每个部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line">SELECT * FROM job_grades;</span><br><span class="line"></span><br><span class="line">#2.连接1的结果和job_grade表，筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line"></span><br><span class="line">SELECT ag_dep.*,g.`grade_level`</span><br><span class="line">FROM (</span><br><span class="line">SELECT AVG(salary) ag,department_id</span><br><span class="line">FROM  employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">) ag_dep</span><br><span class="line">INNER JOIN job_grades g </span><br><span class="line">ON ag_dep.ag BETWEEN lowest_sal AND  highest_sal;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-1-exists后面的子查询"><a href="#1-3-1-exists后面的子查询" class="headerlink" title="1.3.1 exists后面的子查询"></a>1.3.1 exists后面的子查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#exists后面</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">exists(完整的查询语句)</span><br><span class="line">结果：</span><br><span class="line">1或0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT EXISTS (SELECT employee_id FROM employees WHERE salary=30000);</span><br><span class="line"></span><br><span class="line">#案例1：查询有员工的部门名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#in </span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d </span><br><span class="line">WHERE d.`department_id` IN (</span><br><span class="line">SELECT department_id </span><br><span class="line">FROM employees</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d </span><br><span class="line">WHERE EXISTS(</span><br><span class="line">SELECT *</span><br><span class="line">FROM employees e </span><br><span class="line">WHERE d.`department_id` = e.`department_id`</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-2-子查询案例"><a href="#1-3-2-子查询案例" class="headerlink" title="1.3.2 子查询案例"></a>1.3.2 子查询案例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.查询和zlotkey相同部门的员工姓名和工资</span><br><span class="line">#(1)查询Zlotkey的部门</span><br><span class="line">SELECT department_id </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name  = &apos;Zlotkey&apos;</span><br><span class="line">#(2)查询部门号=(1)的姓名和工资</span><br><span class="line">SELECT last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id =(</span><br><span class="line">SELECT department_id </span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name  = &apos;Zlotkey&apos;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#2.查询工资比公司平均工资高的员工的员工号，姓名和工资</span><br><span class="line">#(1)查询平均工资</span><br><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">#(2)查询工资&gt;(1)的员工号，姓名和工资</span><br><span class="line">SELECT last_name,employee_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;(</span><br><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#3.查询各部门中工资比本部门平均工资高的员工的员工号，姓名和工资</span><br><span class="line">#(1)查询各部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">#(2)连接(1)结果集和employees表，进行筛选</span><br><span class="line">SELECT employee_id,last_name,salary</span><br><span class="line">FROM employees e </span><br><span class="line">INNER JOIN(</span><br><span class="line">SELECT AVG(salary) ag,department_id</span><br><span class="line"> FROM employees</span><br><span class="line"> GROUP BY department_id</span><br><span class="line">) ag_dep</span><br><span class="line">ON e.department_id = ag_dep.department_id</span><br><span class="line">WHERE salary&gt;ag_dep.ag;</span><br><span class="line"></span><br><span class="line">#4.查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名</span><br><span class="line">#(1).查询姓名中包含字母u的员工的部门</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE &apos;%u%&apos;</span><br><span class="line">#(2)查询部门号=(1)中的任意一个的员工号和姓名 </span><br><span class="line">SELECT last_name,employee_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN (</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name LIKE &apos;%u%&apos;</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#5.查询在部门的location_id为1700的部门工作的员工的员工号</span><br><span class="line">#(1)查询location_id为1700的部门</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id = 1700</span><br><span class="line">#(2).查询部门号=(1)中的任意一个的员工号</span><br><span class="line">SELECT employee_id </span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id=ANY(</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id = 1700</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#6.查询管理者是King的员工姓名和工资</span><br><span class="line">#(1)查询姓名为king的员工编号</span><br><span class="line">SELECT employee_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name = &apos;K_ing&apos;</span><br><span class="line"></span><br><span class="line">#(2)查询哪个员工的manage_id=(1)</span><br><span class="line">SELECT last_name,salary</span><br><span class="line">FROM employees </span><br><span class="line">WHERE manager_id IN(</span><br><span class="line">SELECT  DISTINCT employee_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name = &apos;K_ing&apos;</span><br><span class="line">)</span><br><span class="line">#7.查询工资最高的员工的姓名，要求first_name和last_name显示为一列，列名为 姓 名</span><br><span class="line"></span><br><span class="line">#(1)查询最高工资</span><br><span class="line">SELECT MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line">#(2)查询工资=(1)的姓.名</span><br><span class="line"></span><br><span class="line">SELECT CONCAT(first_name,last_name) &quot;姓,名&quot;</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary=(</span><br><span class="line"> SELECT MAX(salary)</span><br><span class="line"> FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-3-联合查询"><a href="#1-3-3-联合查询" class="headerlink" title="1.3.3 联合查询"></a>1.3.3 联合查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 联合查询</span><br><span class="line">/*</span><br><span class="line">union联合 合并：将多查询语句的结果合并成一个结果 </span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">查询语句1</span><br><span class="line">union</span><br><span class="line">查询语句2</span><br><span class="line">union</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">应用场景</span><br><span class="line">要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</span><br><span class="line"></span><br><span class="line">特点:</span><br><span class="line"></span><br><span class="line">1.要求多条查询语句的查询列表数是一致的</span><br><span class="line">2.要求多条查询语句的查询的每一列的类型和顺序最好一致 </span><br><span class="line">3.union关键字默认去重，如果使用union all 可怜包含重项</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SELECT id,cname FROM t_ca WHERE csex=&apos;男&apos;</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT t_id,tname FROM t_ua WHERE tGender=&apos;male&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-4-插入语句的方式"><a href="#1-3-4-插入语句的方式" class="headerlink" title="1.3.4 插入语句的方式"></a>1.3.4 插入语句的方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#DML语言</span><br><span class="line">/*</span><br><span class="line">数据操作语言:</span><br><span class="line">插入:insert</span><br><span class="line">修改:update</span><br><span class="line">删除:delete</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#插入语句:</span><br><span class="line">#方式一：支持插入多行，支持子查询</span><br><span class="line">/*</span><br><span class="line">语法:</span><br><span class="line"></span><br><span class="line">insert into 表名(列名,,,,) values(值1,..);</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.插入的值的类型要与列的类型一致或兼容 </span><br><span class="line">#2.不可以为null的列如何必须插入值</span><br><span class="line">#不想插入：</span><br><span class="line">#方式一：写null ，方式二:连列也不写</span><br><span class="line">#3.列的顺序是可以调换</span><br><span class="line">#4.列数和值的个数必须一致 </span><br><span class="line"></span><br><span class="line">#5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">insert into 表名 </span><br><span class="line">set 列名=值，列名=值，...</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-5-修改单表记录"><a href="#1-3-5-修改单表记录" class="headerlink" title="1.3.5 修改单表记录"></a>1.3.5 修改单表记录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#二,修改语句</span><br><span class="line">/*</span><br><span class="line">1.修改单表的记录</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">update 表名</span><br><span class="line">set 列名=新值,列=新值,...</span><br><span class="line">where 筛选条件 </span><br><span class="line"></span><br><span class="line">2.修改多表的记录</span><br><span class="line"></span><br><span class="line">语法:</span><br><span class="line">update 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 </span><br><span class="line">on 连接条件 </span><br><span class="line">set 列=值...</span><br><span class="line"></span><br><span class="line">where 筛选条件</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#修改单表的记录</span><br><span class="line">UPDATE beauty SET phone = &apos;11111&apos;</span><br><span class="line">WHERE NAME LIKE &apos;良%&apos;;</span><br><span class="line"></span><br><span class="line">#修改多表的记录</span><br><span class="line"></span><br><span class="line">#案例1:修改张无忌女朋友的手机号为114</span><br><span class="line"></span><br><span class="line">UPDATE boys b </span><br><span class="line">INNER JOIN beauty b ON bo.`id` = b.`boyfriend_id`</span><br><span class="line">SET b.`phone`=&apos;113&apos;</span><br><span class="line">WHERE bo.`boyName`=&apos;张无忌&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-6-删除方式一"><a href="#1-3-6-删除方式一" class="headerlink" title="1.3.6 删除方式一"></a>1.3.6 删除方式一</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#三.删除语句 </span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">方式一:delete </span><br><span class="line"></span><br><span class="line">语法:</span><br><span class="line">1.单表的删除</span><br><span class="line">delete from 表名 where 筛选</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.多表的删除</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名 </span><br><span class="line">inner|left|right join 表2 别名 on 连接条件 </span><br><span class="line">where  筛选条件 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方式二:truncate</span><br><span class="line">语法:truncate table 表名;</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#方式一:delete</span><br><span class="line">#1.单表的删除</span><br><span class="line">#案例1:删除手机号以9结尾的女神信息</span><br><span class="line"></span><br><span class="line">DELETE FROM beauty WHERE phone LIKE &apos;&amp;9&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.多表的删除</span><br><span class="line"></span><br><span class="line">#案例:删除张无忌的女朋友的信息</span><br><span class="line"></span><br><span class="line">DELETE b FROM beauty b </span><br><span class="line">INNER JOIN boys bo ON b.`boyfrinend_id` = bo.`id`</span><br><span class="line">WHERE  bo.`boyName`=`张无忌`;</span><br><span class="line"></span><br><span class="line">#案例：删除黄晓明的信息以及他朋友的信息</span><br><span class="line">DELETE b,bo</span><br><span class="line">FROM beauty b </span><br><span class="line">INNER JOIN boys bo ON b.`boyfriend_id` = bo.`id`</span><br><span class="line">WHERE bo.`boyName`=`黄晓明`;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-7-删除方式二"><a href="#1-3-7-删除方式二" class="headerlink" title="1.3.7 删除方式二"></a>1.3.7 删除方式二</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#方式二:truncate语句 </span><br><span class="line"></span><br><span class="line">#案例:将魅力值&gt;100的男神信息删除 </span><br><span class="line">TRUNCATE  TABLE boys ;</span><br><span class="line"></span><br><span class="line">#delete pk truncate </span><br><span class="line"></span><br><span class="line">/*1.delete 可以加where 条件,truncate 不能加</span><br><span class="line"></span><br><span class="line">2.truncate删除，效率高一点</span><br><span class="line">3.假如要删除的表中有自增长列，如果用delete删除后，</span><br><span class="line">再插入数据，自增长列的值从断点开始，</span><br><span class="line">而truncate删除后，再插入数据，自增长列的值从1开始</span><br><span class="line">4.truncate删除没有返回值，delete删除有返回值</span><br><span class="line">5.truncate删除不能回滚，delete删除可以回滚</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-8-DDl语言"><a href="#1-3-8-DDl语言" class="headerlink" title="1.3.8 DDl语言"></a>1.3.8 DDl语言</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#DDL</span><br><span class="line">/*</span><br><span class="line">数据定义语言</span><br><span class="line"></span><br><span class="line">库和表的管理 </span><br><span class="line"></span><br><span class="line">一、库的管理 </span><br><span class="line">创建、修改、删除</span><br><span class="line">二、表的管理 </span><br><span class="line">创建 修改 删除</span><br><span class="line">创建: create</span><br><span class="line">修改：alter</span><br><span class="line">删除： drop</span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-9-库的管理"><a href="#1-3-9-库的管理" class="headerlink" title="1.3.9 库的管理"></a>1.3.9 库的管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#库的管理 </span><br><span class="line"></span><br><span class="line">#1.库的创建 </span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">create database (if not exists)库名;//如果有就不报错，没有就创建</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例：创建库Books</span><br><span class="line">CREATE DATABASE IF NOT EXISTS books;</span><br><span class="line"></span><br><span class="line">#2.库的修改</span><br><span class="line">#可以更改库的字符集</span><br><span class="line">ALTER DATABASE books CHARACTER SET gbk;</span><br><span class="line">#3.库的删除</span><br><span class="line">DROP DATABASE IF EXISTS  books;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-0-表的创建"><a href="#1-4-0-表的创建" class="headerlink" title="1.4.0 表的创建"></a>1.4.0 表的创建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE IF NOT EXISTS books;</span><br><span class="line">#表的创建 </span><br><span class="line">/*</span><br><span class="line">create table 表名(</span><br><span class="line"> 列名 列的类型[(长度) 约束],</span><br><span class="line"> 列名 列的类型[(长度) 约束],</span><br><span class="line"> 列名 列的类型[(长度) 约束],</span><br><span class="line"> 列名 列的类型[(长度) 约束],</span><br><span class="line">)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例：创建表Book</span><br><span class="line">CREATE TABLE book (</span><br><span class="line">  id INT,</span><br><span class="line">  #编号</span><br><span class="line">  bName VARCHAR (20),</span><br><span class="line">  #图书名</span><br><span class="line">  price DOUBLE,</span><br><span class="line">  #价格</span><br><span class="line">  authorId IN,</span><br><span class="line">  #作者编号 </span><br><span class="line">  publishDate DATETIME#出版日期</span><br><span class="line">) ;</span><br><span class="line">DESC book;</span><br><span class="line"></span><br><span class="line">#案例：创建表author</span><br><span class="line">CREATE TABLE author(</span><br><span class="line">id INT,</span><br><span class="line">au_name VARCHAR(20),</span><br><span class="line">nation VARCHAR(20)</span><br><span class="line">)</span><br><span class="line">DESC author;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-1-表的修改"><a href="#1-4-1-表的修改" class="headerlink" title="1.4.1 表的修改"></a>1.4.1 表的修改</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#表的修改</span><br><span class="line">/*</span><br><span class="line">alter table 表名 add|drop|modify|change column 列名  [列类型  约束]</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.修改列名</span><br><span class="line">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</span><br><span class="line">DESC book;</span><br><span class="line">#2.修改列的类型或约束 </span><br><span class="line">ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br><span class="line">#3.添加新列</span><br><span class="line"></span><br><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE;</span><br><span class="line">DESC author</span><br><span class="line">#4.删除列</span><br><span class="line">ALTER TABLE author DROP COLUMN annual;</span><br><span class="line"></span><br><span class="line">#5.修改表名</span><br><span class="line"></span><br><span class="line">ALTER TABLE author RENAME TO book_author;</span><br><span class="line">DESC book_author;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-2-表的删除"><a href="#1-4-2-表的删除" class="headerlink" title="1.4.2 表的删除"></a>1.4.2 表的删除</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#表的删除 </span><br><span class="line">DROP TABLE  EXISTS book_author;</span><br><span class="line">SHOW TABLES;</span><br><span class="line"></span><br><span class="line">#通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE  新库名;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE  表名();</span><br><span class="line"></span><br><span class="line">#表的复制 </span><br><span class="line">INSERT INTO author </span><br><span class="line">VALUES</span><br><span class="line">  (1, &apos;村上春树&apos;, &apos;日本&apos;),</span><br><span class="line">  (2, &apos;莫言&apos;, &apos;中国&apos;),</span><br><span class="line">  (3, &apos;冯唐&apos;, &apos;中国&apos;),</span><br><span class="line">  (4, &apos;金庸&apos;, &apos;中国&apos;) ;</span><br><span class="line">SELECT * FROM Author;</span><br><span class="line">#1.仅仅复制表的结构 </span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line">#2.复制表的结构+数据</span><br><span class="line">CREATE TABLE copy2</span><br><span class="line">SELECT * FROM author;</span><br><span class="line">#3.只复制部分数据</span><br><span class="line">CREATE TABLE copy3</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author </span><br><span class="line">WHERE nation =&apos;中国&apos;;</span><br><span class="line"></span><br><span class="line">#仅仅复制某些字段 </span><br><span class="line">CREATE TABLE copy4</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE 0;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-3-库和表的管理"><a href="#1-4-3-库和表的管理" class="headerlink" title="1.4.3 库和表的管理"></a>1.4.3 库和表的管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#1.创建表dept1</span><br><span class="line">/*</span><br><span class="line">NAME    NULL?   TYPE</span><br><span class="line">id  	 	INT(7)</span><br><span class="line">NAME		VARCHAR(25)</span><br><span class="line">USE test;</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">USE test;</span><br><span class="line">CREATE TABLE dept1(</span><br><span class="line">id INT (7),</span><br><span class="line">NAME VARCHAR(25)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">#2.将表departments中的数据插入新表dept2中</span><br><span class="line">CREATE TABLE dept2</span><br><span class="line">SELECT department_id,department_name</span><br><span class="line">FROM myemployees.departments; </span><br><span class="line"></span><br><span class="line">CREATE TABLE emp5(</span><br><span class="line">id INT(7),</span><br><span class="line">first_name VARCHAR(25),</span><br><span class="line">last_name VARCHAR(25),</span><br><span class="line">dept_id INT(7)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#4.将列last_name的长度增加到50</span><br><span class="line">ALTER TABLE emp5 MODIFY COLUMN last_name VARCHAR(50);</span><br><span class="line"></span><br><span class="line">#5.根据表employees创建employees2</span><br><span class="line">CREATE TABLE employees2 LIKE myemployees.`employees`;</span><br><span class="line"></span><br><span class="line">#6.删除表emp5</span><br><span class="line">DROP TABLE IF EXISTS emp5;</span><br><span class="line"></span><br><span class="line">#7.将表employees2重命名为emp5</span><br><span class="line">ALTER TABLE employees2 RENAME TO emp5;</span><br><span class="line"></span><br><span class="line">#8.在表dept和emp5中添加新列test_column,并检查所作的操作</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp5 ADD COLUMN test_column INT;</span><br><span class="line"></span><br><span class="line">#9.直接删除表emp5中的列dept_id</span><br><span class="line">DESC emp5;</span><br><span class="line">ALTER TABLE emp5 DROP COLUMN test_column;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-4-数据类型介绍"><a href="#1-4-4-数据类型介绍" class="headerlink" title="1.4.4 数据类型介绍"></a>1.4.4 数据类型介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#常见的数据类型</span><br><span class="line">/*</span><br><span class="line">数值型：</span><br><span class="line">	整形</span><br><span class="line">	小数：</span><br><span class="line">		定点数</span><br><span class="line">		浮点数</span><br><span class="line">字符型：</span><br><span class="line">	较短的文本:char varchar</span><br><span class="line">	较长的文本:text blob(较长的二进制数据)</span><br><span class="line"></span><br><span class="line">日期型:</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-5-整型"><a href="#1-4-5-整型" class="headerlink" title="1.4.5 整型"></a>1.4.5 整型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">分类:</span><br><span class="line">tinyint、smallint、mediumint、int/integer、bigint</span><br><span class="line"> 1字节 	   2             3            4      8</span><br><span class="line"></span><br><span class="line">特点： </span><br><span class="line"> 1.如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，</span><br><span class="line"> 需要添加unsigned关键字</span><br><span class="line"> 2.如果插入的数值超出了整型的范围，会报</span><br><span class="line"> out of range异常，并且输入临界值</span><br><span class="line"> 3.如果不设置长度，会有默认的长度、</span><br><span class="line"> 4.长度代表了显示的最大宽度，如果不够会用0在</span><br><span class="line"> 左边填充，但必须搭配zerofill使用</span><br><span class="line"> </span><br><span class="line">*/</span><br><span class="line">#1.如何设置无符号和有符号 </span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS tab_int</span><br><span class="line">CREATE TABLE tab_int(</span><br><span class="line"> t1 INT ,</span><br><span class="line"> t2 INT UNSIGNED</span><br><span class="line">);</span><br><span class="line">DESC  tab_int;</span><br><span class="line">INSERT INTO tab_int VALUES(-123456);</span><br><span class="line">INSERT INTO tab_int VALUES(-123456,-123456);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_int</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-6-浮点型"><a href="#1-4-6-浮点型" class="headerlink" title="1.4.6 浮点型"></a>1.4.6 浮点型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">分类：</span><br><span class="line">1.浮点型</span><br><span class="line">float(M,D)</span><br><span class="line">double(M,D)</span><br><span class="line"></span><br><span class="line">2.定点型</span><br><span class="line">dec(M,D)</span><br><span class="line">decimal(M,D)</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.M和D</span><br><span class="line">M:整数部位+小数部位</span><br><span class="line">D:小数部位</span><br><span class="line">如果超过范围，则插入临界值</span><br><span class="line">2.M和D都可以省略</span><br><span class="line">如果decimal，则M默认为10,D默认为0</span><br><span class="line">如果是float和double，则会根据插入的数值的</span><br><span class="line">精度来决定精度</span><br><span class="line">3.定点型的精确度较高，如果要求插入数值的精度</span><br><span class="line">较高如货币运算等考虑使用</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#原则:</span><br><span class="line">/*</span><br><span class="line">所选择的类型越简单越好，能保存数值的类型越小越好</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#测试M和D</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_float(</span><br><span class="line"></span><br><span class="line">f1 FLOAT(5,2),</span><br><span class="line">f2 DOUBLE(5,2),</span><br><span class="line">f3 DECIMAL(5,2)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_float;</span><br><span class="line">INSERT INTO tab_float VALUES(123.45,123.45,123.45);</span><br><span class="line">INSERT INTO tab_float VALUES(123.45,123.45,123.45);</span><br><span class="line">INSERT INTO tab_float VALUES(123.456,123.456,123.456);</span><br><span class="line">INSERT INTO tab_float VALUES(123.45,123.45,123.45);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-7-字符型"><a href="#1-4-7-字符型" class="headerlink" title="1.4.7 字符型"></a>1.4.7 字符型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#字符型 </span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">较短的文本：</span><br><span class="line">char </span><br><span class="line">varchar </span><br><span class="line">较长的文本：</span><br><span class="line">text </span><br><span class="line">blob(较大的二进制)</span><br><span class="line"></span><br><span class="line">特点：			   </span><br><span class="line">写法			       M的意思   	   	    特点	 空间的耗费	效率</span><br><span class="line">char chart(M)		最大字符,可以省略，默认为1   固定长度的字符	比较耗费	高</span><br><span class="line">varchar  varchar(M)	最大的字符数,不可省略	      可变长度的字符	比较节省	低</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">binary和varbinary用于保存较短的二进制</span><br><span class="line">enum用于保存枚举</span><br><span class="line">set用于保存集合</span><br><span class="line">enum枚举</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_char(</span><br><span class="line"> c1 ENUM(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">INSERT INTO tab_char VALUE(&apos;a&apos;);</span><br><span class="line">INSERT INTO tab_char VALUE(&apos;b&apos;);</span><br><span class="line">INSERT INTO tab_char VALUE(&apos;c&apos;);</span><br><span class="line">INSERT INTO tab_char VALUE(&apos;AS&apos;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_char;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_set(</span><br><span class="line">s1 SET(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-8-日期型"><a href="#1-4-8-日期型" class="headerlink" title="1.4.8 日期型"></a>1.4.8 日期型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#日期型</span><br><span class="line">/*</span><br><span class="line">分类：</span><br><span class="line">date  只保存日期</span><br><span class="line">time   只保存时间</span><br><span class="line">year   只保存年</span><br><span class="line">datetime  保存日期+时间</span><br><span class="line">timestamp  保存日期+时间</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">		字节   		范围		时区影响</span><br><span class="line"> datetime	8		1000-9999        不受</span><br><span class="line"> timestamp	4		1970-2038	 受</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_date(</span><br><span class="line"></span><br><span class="line">t1 DATETIME,</span><br><span class="line">t2 TIMESTAMP</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">INSERT INTO tab_date VALUE(NOW(),NOW());</span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line">SHOW VARIABLES LIKE  &apos;time_zone&apos;;</span><br><span class="line">SET time_zone=&apos;+9:00&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-9-总结"><a href="#1-4-9-总结" class="headerlink" title="1.4.9 总结"></a>1.4.9 总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">select    查询列表  (1)</span><br><span class="line">from     表1 别名 (2)</span><br><span class="line">连接类型   join 表2 (3)</span><br><span class="line">on       连接条件   (4)</span><br><span class="line">where    筛选     (5)</span><br><span class="line">group by  分组列表   (6)</span><br><span class="line">having    筛选		(7)</span><br><span class="line">order by  排序列表 	(8)</span><br><span class="line">limit   起始条目索引,条目数 (9)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DML语言:</span><br><span class="line">/*</span><br><span class="line">语法:</span><br><span class="line">insert into  表名(字段名...) values(值)</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.要求值的类型和字段的类型要一致或兼容</span><br><span class="line">2.字段的个数和顺序不一定与原始表中的字段个数和</span><br><span class="line">排序一致,但必须保证值和字段一一对应</span><br><span class="line">3.假如表中有可以为null的字段，注意可以通过以下</span><br><span class="line">两种方式插入null值</span><br><span class="line">(1)字段和值都省略</span><br><span class="line">(2)字段写上，值使用null</span><br><span class="line">4.字段和值的个数必须一致 </span><br><span class="line">5.字段名可以省略，默认所有列</span><br><span class="line"></span><br><span class="line">方式二</span><br><span class="line">语法:</span><br><span class="line">insert into 表名 set 字段=值,字段=值....</span><br><span class="line"></span><br><span class="line">两种方式的区别 </span><br><span class="line"></span><br><span class="line">1.方式一支持一次插入多行，语法如下：</span><br><span class="line">insert into 表名[(字段名...)] values(值,...),(值,...)</span><br><span class="line">2.方式一支持子查询,语法如下:</span><br><span class="line">insert  into 表名</span><br><span class="line">*/</span><br><span class="line">一.修改单表的记录</span><br><span class="line">语法:UPDATE 表名  SET  字段=值，字段=值[WHERE 筛选条件];</span><br><span class="line"></span><br><span class="line">二.修改多表的记录</span><br><span class="line"></span><br><span class="line">语法:</span><br><span class="line">UPDATE 表1 别名</span><br><span class="line">LEFT|RIGHT|INNER  JOIN 表2 别名 </span><br><span class="line">ON 连接条件 </span><br><span class="line">SET 字段=值，字段=值</span><br><span class="line">[WHERE 筛选条件]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">删除</span><br><span class="line">方式一:使用delete </span><br><span class="line">一.删除单表的记录</span><br><span class="line">语法：delete from  表名 [where 筛选条件]</span><br><span class="line"></span><br><span class="line">二.级联删除</span><br><span class="line">语法：delete   别名1,别名2  from 表1 inner|left|right|join 表2 别名 </span><br><span class="line"></span><br><span class="line">on 连接条件</span><br><span class="line">[where 筛选条件]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方式二：使用truncate</span><br><span class="line">语法：truncate table 表名</span><br><span class="line"></span><br><span class="line">两种方式的区别[面试题]</span><br><span class="line"></span><br><span class="line">1.truncate删除后，如果再插入，标识列从1开始</span><br><span class="line">delete删除后，如果再插入，标识列从断点开始</span><br><span class="line"></span><br><span class="line">2.delete可以添加筛选条件</span><br><span class="line">truncate不可以添加筛选条件</span><br><span class="line"></span><br><span class="line">3.truncate效率较高</span><br><span class="line"></span><br><span class="line">4.truncate没有返回值</span><br><span class="line">delete可以返回爱影响的行数</span><br><span class="line"></span><br><span class="line">5.truncate不可以回滚</span><br><span class="line"> delete可以回滚</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">DDL语言</span><br><span class="line"></span><br><span class="line">一、创建库</span><br><span class="line">CREATE DATABASE [IF ont EXISTS] 库名 [CHAR acter SET 字符集名];</span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line">二、修改库</span><br><span class="line">ALTER DATABASE 库名 CHARACTER SET 字符集名</span><br><span class="line">三、删除库</span><br><span class="line">DROP DATABASE [IF EXISTS] 库名;</span><br><span class="line"></span><br><span class="line">表：</span><br><span class="line">/*</span><br><span class="line"></span><br><span class="line">一、创建表</span><br><span class="line">create table [if not exists] 表名(</span><br><span class="line">字段名 字段类型  [约束]</span><br><span class="line">字段名 字段类型  [约束]</span><br><span class="line">...</span><br><span class="line">字段名  字段类型  [约束]</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">二、修改表</span><br><span class="line">1.添加列</span><br><span class="line">alter table 表名 add colum 列名 类型 [first|after 字段名];</span><br><span class="line"></span><br><span class="line">2.修改列的类型或约束</span><br><span class="line">alter table 表名modify codify column 列名 新类型  [新约束]</span><br><span class="line"></span><br><span class="line">3.修改列名</span><br><span class="line">alter table 表名 change column 旧列名  新列名  类型;</span><br><span class="line">4.删除列</span><br><span class="line">alter table 表名 drop column 列名;</span><br><span class="line">5.修改表名 </span><br><span class="line">alter table 表名 rename [to] 新表名;</span><br><span class="line"></span><br><span class="line">三、删除表</span><br><span class="line">drop table [if exists] 表名;</span><br><span class="line"></span><br><span class="line">四、复制表</span><br><span class="line">1.复制表的结构 </span><br><span class="line">create table 表名 like 旧表;</span><br><span class="line">2.复制表的结构+数据</span><br><span class="line">create table 表名</span><br><span class="line">select 查询列表  from 旧表 [where 筛选]</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">数据类型</span><br><span class="line">一、数值型</span><br><span class="line"></span><br><span class="line">1.整形</span><br><span class="line">tinyint、smallint、mediumint、int/integer、brgint</span><br><span class="line"> 1	    2   	3 	  4 	     5</span><br><span class="line"> </span><br><span class="line"> 特点：</span><br><span class="line"> 1.都可以设置无符号和有符号，默认有符号，通过unsigned设置无符号</span><br><span class="line"> 2.如果超出了范围，会报out OR range异常，插入临界值</span><br><span class="line"> 3.长度可以不指定，默认会有一个长度，长度代表显示的最大宽度，如果</span><br><span class="line"> 不够则用0填充，但需要搭配zerofill,并且默认变为无符号整形</span><br><span class="line"> </span><br><span class="line">2.浮点型</span><br><span class="line">定点数：decimal(M,D)</span><br><span class="line">浮点数：</span><br><span class="line">FLOAT(M,D)</span><br><span class="line">DOUBLE(M,D)</span><br><span class="line">特点：</span><br><span class="line">1.M代表整数部位+小数部位的个数，D代表小数部位 </span><br><span class="line">2.如果超出范围，则报out OR RANGE 异常，并且插入临界值</span><br><span class="line">3.W和D都可以省略，但对于定点数，M默认为10,D默认为0</span><br><span class="line">4.如果精度要求较高，则优先考虑使用定点数</span><br><span class="line"></span><br><span class="line">3.字符型</span><br><span class="line">CHAR VARCHAR BINARY VARBINARY ENUM  SET TEXT BLOB</span><br><span class="line"> </span><br><span class="line"> CHAR:固定长度的字符，写法为char(M)，最大长度不能超过M,其中M可以省略，默认为1</span><br><span class="line"> VARCHAR:可变长度的字符，写法为varcahr(M),最大长度不能超过M,其中M不可以省略</span><br><span class="line"> </span><br><span class="line">4.日期型</span><br><span class="line">YEAR 年</span><br><span class="line">DATE  日期</span><br><span class="line">TIME  时间</span><br><span class="line">DATETIME 日期时间    8 </span><br><span class="line">TIMESTAMP 日期时间   4   比较容易爱时区影响</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-0-常见约束"><a href="#1-5-0-常见约束" class="headerlink" title="1.5.0 常见约束"></a>1.5.0 常见约束</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">含义：一种限制，用于限制表中的数据，为了保证表中的</span><br><span class="line">数据的准确和可靠性</span><br><span class="line">分类：六大约束</span><br><span class="line">not null :非空，用于保证该字段的值不能为空</span><br><span class="line">default:默认，用于保证该字段有默认值</span><br><span class="line">primary key:主键，用于保证该字段的值具有唯一性，并且非空，学号、员工编号</span><br><span class="line">unique:唯一，用于保证该字段的值具有唯一性，可以为空，座位号</span><br><span class="line">check:检查约束，mysql不支持</span><br><span class="line">foreign key:外键，用于限制两个表的关系，用于保证该字段的值</span><br><span class="line">必须来自于主表的关联列的值，在从表添加外键约束，用于引用</span><br><span class="line">主表中某列的值</span><br><span class="line">比如学生表的专业编号，员工表的部门编号，员工表的工种编号 </span><br><span class="line"></span><br><span class="line">添加约束的时机：</span><br><span class="line">	1.创建表时</span><br><span class="line">	2.修改表时</span><br><span class="line">约束的添加分类：</span><br><span class="line">		列级约束:</span><br><span class="line">		六大约束语法上都可以写，但外键约束没有效果</span><br><span class="line">		表级约束:</span><br><span class="line">		除了非空，默认，其它的都可以</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line"></span><br><span class="line">字段名  字段类型  列级约束</span><br><span class="line">字段名	字段类型</span><br><span class="line">表级约束 </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-1-创建表时添加列级约束"><a href="#1-5-1-创建表时添加列级约束" class="headerlink" title="1.5.1 创建表时添加列级约束"></a>1.5.1 创建表时添加列级约束</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#一。创建表时添加约束</span><br><span class="line">#1.添加列级约束 </span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">直接在字段名和类型后面追加 约束类型即可</span><br><span class="line">只支持：默认 非空 主键 唯一</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h4 id="创建表时添加表级约束"><a href="#创建表时添加表级约束" class="headerlink" title="创建表时添加表级约束"></a>创建表时添加表级约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#添加表级约束</span><br><span class="line">/*</span><br><span class="line">语法：在各个字段的最下面</span><br><span class="line">[constraint 约束名] 约束类型(字段名)</span><br><span class="line">*/</span><br><span class="line">/*</span><br><span class="line">通用的写法：</span><br><span class="line">create  table if exists  stuinfo(</span><br><span class="line">id int frimary key,</span><br><span class="line">stuname varchar(20) not null,</span><br><span class="line">sex char(1),</span><br><span class="line">age int default 18,</span><br><span class="line">seat int unique,</span><br><span class="line">majorid int,</span><br><span class="line">constraint fk_stuinfo_major foreign key(majorid) </span><br><span class="line">references major(id)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">id INT ,</span><br><span class="line">stuname VARCHAR(20),</span><br><span class="line">gender CHAR(1),</span><br><span class="line">seat INT,</span><br><span class="line">age INT,</span><br><span class="line">majorid INT,</span><br><span class="line">CONSTRAINT pk PRIMARY KEY(id),#主键</span><br><span class="line">CONSTRAINT  uq UNIQUE(seat),#唯一键</span><br><span class="line">CONSTRAINT  ck   CHECK(gender=&apos;男&apos; OR gender = &apos;女&apos;),#检查</span><br><span class="line">CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-2-主键和唯一的区别"><a href="#1-5-2-主键和唯一的区别" class="headerlink" title="1.5.2 主键和唯一的区别"></a>1.5.2 主键和唯一的区别</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">添加约束的时机:</span><br><span class="line">1.创建表时</span><br><span class="line">2.修改表时</span><br><span class="line"></span><br><span class="line">约束的添加分类：</span><br><span class="line">	列级约束 ：</span><br><span class="line">	六大约束语法上都支持，但外键约束没有效果</span><br><span class="line">	表级约束：</span><br><span class="line">	除了非空，默认，其他的都支持</span><br><span class="line">	</span><br><span class="line">主键和唯一的大对比：</span><br><span class="line">		保证唯一性  是否可以为空   一个表中可以有多少个  是否允许组合</span><br><span class="line">	主键     y		n		至多1个			允许不推荐</span><br><span class="line">	唯一	 y		y		可以有多个 		允许不推荐</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-3-外键的特点"><a href="#1-5-3-外键的特点" class="headerlink" title="1.5.3 外键的特点"></a>1.5.3 外键的特点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">外键：</span><br><span class="line">1.要求在从表设置外键关系 </span><br><span class="line">2.从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</span><br><span class="line">3.主表的关联列必须是一个key（一般是主键或唯一）</span><br><span class="line">4.插入数据时，先插入主表，再插入从表，删除数据时，</span><br><span class="line">先删除从表，再删除主表</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-4-修改表时添加约束"><a href="#1-5-4-修改表时添加约束" class="headerlink" title="1.5.4 修改表时添加约束"></a>1.5.4 修改表时添加约束</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">修改表时添加约束：</span><br><span class="line">1.添加列级约束 </span><br><span class="line">alter table 表名 modify column  字段名  字段类型  新约束;</span><br><span class="line"></span><br><span class="line">2.添加表级约束</span><br><span class="line">alter table  表名  add [constraint 约束名] 约束类型(字段名) [外键的引用]</span><br><span class="line">*/</span><br><span class="line">#2.添加默认约束 </span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br><span class="line">#3.添加主键 </span><br><span class="line">ALTER TABLE stuinfo MODIFY  COLUMN id INT PRIMARY KEY;</span><br><span class="line">#(1).列级约束 </span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line">#(2).表级约束</span><br><span class="line">ALTER TABLE  stuinfo ADD PRIMARY  KEY(id);</span><br><span class="line"></span><br><span class="line">#4.添加唯一</span><br><span class="line">#5.添加外键</span><br></pre></td></tr></table></figure>

<h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#1.删除非空约束 </span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br><span class="line">#2.删除默认约束 </span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT;</span><br><span class="line">#3.删除主键 </span><br><span class="line">ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br><span class="line">#4.删除唯一</span><br><span class="line">ALTER TABLE stuinfo DROP INDEX </span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br><span class="line">#5.删除外键</span><br><span class="line">ALTER TABLE stuinfo DROP FOREIGN KEY majorid;</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-5-标识列"><a href="#1-5-5-标识列" class="headerlink" title="1.5.5 标识列"></a>1.5.5 标识列</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#标识列</span><br><span class="line">/*</span><br><span class="line">又称为自增长列</span><br><span class="line">含义：可以不用手动的插入值，系统提供默认的序列值</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.标识列必须和主键搭配么？不一定，但要求是一个key</span><br><span class="line">2.一个表可以有几个标识么？至多一个</span><br><span class="line">3.标识列的类型只能是数值型 </span><br><span class="line">4.标识列可以通过 set auto_increment_increment=3,设置步长</span><br><span class="line">可以通过手动插入值，设置起始值</span><br><span class="line">*/</span><br><span class="line">#一.创建表时设置标识列</span><br><span class="line">DROP TABLE IF EXISTS  tab_indentity;</span><br><span class="line">CREATE TABLE tab_indentity(</span><br><span class="line"> id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line"> NAME VARCHAR(20)</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_indentity VALUES(NULL,&apos;john&apos;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-6-事务的介绍"><a href="#1-5-6-事务的介绍" class="headerlink" title="1.5.6 事务的介绍"></a>1.5.6 事务的介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#TCL</span><br><span class="line">/*</span><br><span class="line">Transaction Control Language 事务控制语言</span><br><span class="line">事务：</span><br><span class="line">一个或一组sql语句组成一个执行单元，这个执行单元要么</span><br><span class="line">全部执行，要么全部不执行</span><br><span class="line">案例：转账 </span><br><span class="line"></span><br><span class="line">张三丰   1000</span><br><span class="line">郭襄      1000</span><br><span class="line">update  表 set  张三丰的余额=500 where name=&apos;张三丰&apos;</span><br><span class="line">意外</span><br><span class="line">update  表 set  郭襄的余额=1500 where name=&apos;郭襄&apos;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">事务：事务由单独单元的一个或多个sql语句组成，在这个</span><br><span class="line">单元中，每个mysql语句是相互依赖的。而整个单独单元作为</span><br><span class="line">一个不可分割的整体，如果单元中某条sql语句一旦执行失败或产生</span><br><span class="line">错误，整个单元将会回滚。所有受到影响的数据将返回到事物</span><br><span class="line">开始以前的状态;如果单元中的所有sql语句均执行成功，则事物被顺序执行</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">存储引擎：</span><br><span class="line">1.概念：在mysql中的数据用各种不同的技术存储在文件(或内存)中</span><br><span class="line">2.通过show ENGINES:来查看mysql支持的存储引擎</span><br><span class="line">3.在mysql中用的最多的存储引擎有:</span><br><span class="line">INNODB,MYISAM,memory等.其中innodb支持事务，而myisam,</span><br><span class="line">memory等不支持</span><br><span class="line"></span><br><span class="line">SHOW ENGINES;</span><br><span class="line"></span><br><span class="line">事务的ACID(acid)属性</span><br><span class="line">1.原子性(Atomicity)</span><br><span class="line">原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么</span><br><span class="line">都不发生</span><br><span class="line"></span><br><span class="line">2.一致性(Consistency)</span><br><span class="line">事务必须使数据库从一个一致性状态变换到另外一个一致性状态</span><br><span class="line"></span><br><span class="line">3.隔离性(lsolation)</span><br><span class="line">事务的隔离性是指一个事务的执行不能被其他事务干扰，</span><br><span class="line">即一个事务内部的操作及使用的数据对并发的其他事务是</span><br><span class="line">隔离的，并发执行的各个事务之间不能互相干扰</span><br><span class="line"></span><br><span class="line">4.持久性(Durability)</span><br><span class="line">执久性是指一个事务一旦被提交，它对数据库中数据的改变就是</span><br><span class="line">永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-7-演示事务的使用"><a href="#1-5-7-演示事务的使用" class="headerlink" title="1.5.7 演示事务的使用"></a>1.5.7 演示事务的使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">事务的创建</span><br><span class="line">隐式事务:事务没有明显的开启和结束的标记</span><br><span class="line">比如：insert、update、delete语句 </span><br><span class="line"></span><br><span class="line">显式事务：事务具有明显的开启和结束的标记</span><br><span class="line">前提；必须先设置自动提交功能为禁用:</span><br><span class="line">set autocommit = 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">显示事务的状态:</span><br><span class="line">SHOW VARIABLES  LIKE &apos;autocommit&apos;;</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">步骤1:开启事务 </span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION ;#可选的</span><br><span class="line">步骤2：编写事务中的sql语句(SELECT INSERT UPDATE DELETE)</span><br><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">步骤3：结束事务</span><br><span class="line">commit；提交事务</span><br><span class="line">rollback；回滚事务</span><br><span class="line"></span><br><span class="line">#######</span><br><span class="line">#演示事务的使用步骤</span><br><span class="line">#开启事务</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务的语句</span><br><span class="line">UPDATE account SET balance = 500 WHERE userna=&apos;张无忌&apos;;</span><br><span class="line">UPDATE account SET balance = 1500 WHERE userna=&apos;赵敏&apos;;</span><br><span class="line"></span><br><span class="line">#结束事务</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-8-事务并发问题介绍"><a href="#1-5-8-事务并发问题介绍" class="headerlink" title="1.5.8 事务并发问题介绍"></a>1.5.8 事务并发问题介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">对于同时运行的多个事务，当这些事务访问数据库中相同的</span><br><span class="line">数据时，如果没有采取必要的隔离机制，就会导致各种并发问题：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">脏读:对于两个事务T1,T2,T1读取了已经被T2更新但还没有被</span><br><span class="line">提交的字段，之后若T2回滚，T1读取的内容就是临时且无效的</span><br><span class="line"></span><br><span class="line">不可重复读：对于两个事务T1,T2,T1读取了一个字段，然后T2</span><br><span class="line">更新了该字段，之后，T1再次读取同一个字段，值就不同了</span><br><span class="line"></span><br><span class="line">幻读：对于两个事务T1,T2,T1从一个表中读取了一字段，然后T2</span><br><span class="line">在该表中插入了一些新的行，之后，如果T1再次读取同一个</span><br><span class="line">表，就会多出几行</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">数据库事务的隔离性:数据库系统必须具有隔离并运行各个</span><br><span class="line">事务的能力，使它们不会相互影响，避免各种并发问题</span><br><span class="line"></span><br><span class="line">一个事务与其他事务隔离的程序称为隔离级别，数据库规定了</span><br><span class="line">多种事务隔离级别，不再隔离级别对应不再的干扰程度，</span><br><span class="line">隔离级别越高，数据一致性就越好，但并发性越弱</span><br><span class="line"></span><br><span class="line">mysql支持4种事务隔离级别，mysql默认的事务隔离级别为:</span><br><span class="line">REPEATABLE READ</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-5-9-演示事务的隔离级别"><a href="#1-5-9-演示事务的隔离级别" class="headerlink" title="1.5.9 演示事务的隔离级别"></a>1.5.9 演示事务的隔离级别</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">事务的隔离级别:</span><br><span class="line">		    脏读      不可重复读      幻读</span><br><span class="line">READ UNCOMMITTED :   Y 		Y  		Y</span><br><span class="line"></span><br><span class="line">READ COMMITTED:	     N   	Y   		Y		</span><br><span class="line"></span><br><span class="line">REPEATABLE   READ:    N  	N  	         Y</span><br><span class="line"></span><br><span class="line">SERIALIZABLE  :       N 	N  		N</span><br><span class="line"></span><br><span class="line">mysql中默认第三个隔离级别:REPEATABLE   READ</span><br><span class="line">oracle中默认第二个级别:   READ   COMMITTED</span><br><span class="line">查看隔离级别</span><br><span class="line">SELECT @@tx_isolation;</span><br><span class="line"></span><br><span class="line">设置隔离级别</span><br><span class="line">SET SESSION|GLOBAL  TRANSACTION  ISOLATION  LEVEL 隔离级别;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.每启动一个mysql程序，就会获得一个单独的数据库连接，每个数据库</span><br><span class="line">都有一个全局变量@@tx_insolation,表示当前的事务隔离级别</span><br><span class="line">2.查看当前的隔离级别:SELECT@@tx_isolation;</span><br><span class="line">3.设置当前mysql连接的隔离级别;</span><br><span class="line">--set TRANSACTION  ISOLATION LEVEL READ COMMITTED;</span><br><span class="line">4.设置数据库系统的全局的隔离级别:</span><br><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;</span><br></pre></td></tr></table></figure>

<h4 id="回滚点"><a href="#回滚点" class="headerlink" title="回滚点"></a>回滚点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#演示savepoit的使用</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id=25;</span><br><span class="line">SAVEPOINT a;#设置保存点</span><br><span class="line">DELETE FROM account WHERE  id=28;</span><br><span class="line">ROLLBACK TO  a;#回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure>

<h2 id="1-6-0-视图"><a href="#1-6-0-视图" class="headerlink" title="1.6.0 视图"></a>1.6.0 视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#视图</span><br><span class="line">/*</span><br><span class="line">含义：虚拟表，和普通表一样使用</span><br><span class="line">mysql5.1版本的新特性，是通过表动态生成的数据</span><br><span class="line">在使用视图时动态生成的，只保存了sql逻辑，不</span><br><span class="line">保存查询结果</span><br><span class="line"></span><br><span class="line">应用场景：</span><br><span class="line">多个地方用到同样的查询结果</span><br><span class="line">该查询结果使用的sql语句较复杂</span><br><span class="line"></span><br><span class="line">示例:</span><br><span class="line">createview my_vq</span><br><span class="line">as </span><br><span class="line">select studentname,majorname</span><br><span class="line">from student s</span><br><span class="line">innerjoin major m </span><br><span class="line">on s.majorid =m.majorid</span><br><span class="line">where  s.majorid=1;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#案例:查询姓张的学生名和专业名</span><br><span class="line">SELECT stuname,majorname</span><br><span class="line">FROM stuinfo a </span><br><span class="line">INNER JOIN major m ON s.`majorid`=m.`id`</span><br><span class="line">WHERE  s.`stuname` LIKE &apos;张%&apos;;</span><br><span class="line"></span><br><span class="line">CREATE VIEW v1 AS </span><br><span class="line">SELECT </span><br><span class="line">  stuname,</span><br><span class="line">  majorname </span><br><span class="line">FROM</span><br><span class="line">  stuinfo a </span><br><span class="line">  INNER JOIN major m </span><br><span class="line">    ON s.`majorid` = m.`id` </span><br><span class="line">#查询</span><br><span class="line">SELECT * FROM v1 WHERE stuname LIKE &apos;张%&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-1-视图的创建"><a href="#1-6-1-视图的创建" class="headerlink" title="1.6.1 视图的创建"></a>1.6.1 视图的创建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#创建视图</span><br><span class="line">/*</span><br><span class="line">语法:</span><br><span class="line">create view 视图名</span><br><span class="line">as </span><br><span class="line">查询语句;</span><br><span class="line"></span><br><span class="line">好处：</span><br><span class="line">重用了sql语句</span><br><span class="line">简化复杂的sql操作，不必知道它的查询细节</span><br><span class="line">保护数据，提高安全性</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line">#1.查询姓名中包含a字符的员工名、部门名和工种信息</span><br><span class="line"></span><br><span class="line">CREATE VIEW  mvy1</span><br><span class="line">AS </span><br><span class="line">SELECT last_name,deartment_name,job_title</span><br><span class="line">FROM employees e </span><br><span class="line">JOIN departments d  ON e.department_id=d.department_id</span><br><span class="line">JOIN jobs j ON j.job_id  = e.job_id;</span><br><span class="line"></span><br><span class="line">#(2)使用</span><br><span class="line">SELECT * FROM mvy1 WHERE last_name LIKE &apos;%a%&apos;;</span><br><span class="line"></span><br><span class="line">#2.查询各部门的平均工资级别</span><br><span class="line"></span><br><span class="line">#创建视图查看每个部门的平均工资</span><br><span class="line">CREATE VIEW  myv2</span><br><span class="line">AS </span><br><span class="line">SELECT AVG(salary) ag, department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line">#(2)使用</span><br><span class="line">SELECT myv2.`ag`,g.grade_level</span><br><span class="line">FROM myv2</span><br><span class="line">JOIN job_grades g </span><br><span class="line">ON myv2.`ag` BETWEEN g.`lowest_sal` AND g.`highest_sal`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.查询平均工资最低的部门信息</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"></span><br><span class="line">#4.查询平均工资最低的部门名和工资</span><br><span class="line">CREATE VIEW myv3</span><br><span class="line">AS</span><br><span class="line">SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"></span><br><span class="line">SELECT d.* ,m.ag</span><br><span class="line">FROM myv3 m </span><br><span class="line">JOIN departments d </span><br><span class="line">ON m.`department_id` = d.`department_id`</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-2-视图的修改"><a href="#1-6-2-视图的修改" class="headerlink" title="1.6.2 视图的修改"></a>1.6.2 视图的修改</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#方式一：</span><br><span class="line">/*</span><br><span class="line">create or replace view 视图名</span><br><span class="line">as </span><br><span class="line">查询语句;</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">SELECT * FROM myv3</span><br><span class="line">CREATE OR REPLACE VIEW myv3</span><br><span class="line">AS </span><br><span class="line">SELECT  AVG(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">alter view 视图名</span><br><span class="line">as </span><br><span class="line">查询语句 ;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">ALTER VIEW myv3</span><br><span class="line">AS </span><br><span class="line">SELECT * FROM employees;</span><br></pre></td></tr></table></figure>

<h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">语法：</span><br><span class="line">drop view 视图名，视图名,...;</span><br><span class="line">*/</span><br><span class="line">DROP VIEW myv1,mvy2,myv3;</span><br><span class="line"></span><br><span class="line">#查看视图</span><br><span class="line"></span><br><span class="line">DESC myv3;</span><br><span class="line">SHOW CREATE VIEW myv3;</span><br></pre></td></tr></table></figure>

<h4 id="视图的更新"><a href="#视图的更新" class="headerlink" title="视图的更新"></a>视图的更新</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">视图的更新</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS </span><br><span class="line">SELECT last_name,email</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv1;</span><br><span class="line">#1.插入</span><br><span class="line"></span><br><span class="line">INSERT INTO myv1 VALUES(&apos;张飞&apos;,&apos;zg@qq.com&apos;);</span><br><span class="line"></span><br><span class="line">#2.修改</span><br><span class="line">UPDATE myv1 SET last_name = &apos;张无忌&apos; WHERE last_name=&apos;张飞&apos;;</span><br><span class="line"></span><br><span class="line">#3.删除</span><br><span class="line">DELETE FROM myv1 WHERE last_name = &apos;张无忌&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#具备以下特点的视图不允许更新</span><br><span class="line"></span><br><span class="line">#1.包含以下关键字的sql语句,分组函数、distinct、group by、</span><br><span class="line">#having、union或者nuion all</span><br><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS </span><br><span class="line">SELECT MAX(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv1;</span><br><span class="line"></span><br><span class="line">更新</span><br><span class="line">UPDATE myv1 SET m=9000 WHERE department_id=10</span><br><span class="line"></span><br><span class="line">常量视图</span><br><span class="line"></span><br><span class="line">select中包含子查询 </span><br><span class="line">JOIN </span><br><span class="line">FROM 一个不能更新的视图</span><br><span class="line">WHERE 子句的子查询引用了from子名中的表</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">视图和表的对比 </span><br><span class="line">      创建语法的关键字 	是否实际占用物理空间		  使用</span><br><span class="line">视图  create  view   		没有，只是保存了sql逻辑   增删改查，一般只用查</span><br><span class="line"></span><br><span class="line">表     create   table    	占用保存了数据		增删改查</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>/*<br>delete 和 truncate 在事务使用时的区别</p>
<p>*/<br>演示delete</p>
<p>SET autocommit =0;<br>START  TRANSACTION;<br>DELETE FROM account;<br>ROLLBACK;</p>
<p>演示truncate</p>
<p>SET autocommit=0;<br>START TRANSACTION;<br>TRUNCATE TABLE account;<br>ROLLBACK;</p>
<p>SELECT * FROM account;</p>
<hr>
<h2 id="1-6-3-变量的介绍"><a href="#1-6-3-变量的介绍" class="headerlink" title="1.6.3 变量的介绍"></a>1.6.3 变量的介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">系统变量：</span><br><span class="line">	全局变量</span><br><span class="line">	会话变量</span><br><span class="line">自定义变量：</span><br><span class="line">	用户变量</span><br><span class="line">	局部变量</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">#一.系统变量</span><br><span class="line">说明：变量由系统提供，不是用户定义，属于服务器层面 </span><br><span class="line">使用的语法：</span><br><span class="line">1.查看所有的系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES;#查看系统变量</span><br><span class="line">SHOW SESSION VARIABLES;#查看会话变量</span><br><span class="line">2.满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL [SESSION] VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line">3.查看指定的某个系统变量的值</span><br><span class="line">SELECT @@[global]系统变量名;</span><br><span class="line">4.为某个系统变量赋值</span><br><span class="line">方式一:SET GLOBAL [SESSION]  系统变量名=值;</span><br><span class="line">方式二:SET @@global [SESSION],系统变量名=值;</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">如果是全局级别，则需要加global,如果是会话级别，则</span><br><span class="line">需要加session，如果不写，则默认session</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-4-全局变量的演示"><a href="#1-6-4-全局变量的演示" class="headerlink" title="1.6.4 全局变量的演示"></a>1.6.4 全局变量的演示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#全局变量</span><br><span class="line">/*</span><br><span class="line">作用域：服务器每次启动将为所有的全局变量赋初始值，</span><br><span class="line">针对于所有的会话(连接)有效，但不能跨重启</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">(1)查看所有的全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES;</span><br><span class="line">(2)查看部分的全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line">(3)查看指定的全局变量的值</span><br><span class="line">SELECT @@global.autocommit;</span><br><span class="line">SELECT @@tx_isolation;</span><br><span class="line">(4)为某个指定的全局变量赋值</span><br><span class="line">SET @@global.autocommit=0;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-4-会话变量的演示"><a href="#1-6-4-会话变量的演示" class="headerlink" title="1.6.4 会话变量的演示"></a>1.6.4 会话变量的演示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#会话变量</span><br><span class="line">/*</span><br><span class="line">作用域：仅仅针对于当前会话(连接)有效</span><br><span class="line">*/</span><br><span class="line">(1)查看所有的会话变量</span><br><span class="line">SHOW SESSION VARIABLES;</span><br><span class="line">(2)查看部分的会话变量</span><br><span class="line">SHOW VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line">SHOW SESSION VARIABLES LIKE &apos;%char%&apos;;</span><br><span class="line">(3)查看指定的某个会话变量</span><br><span class="line">SELECT @@tx_isolation;</span><br><span class="line">SELECT @@session.tx_isolation;</span><br><span class="line">(4)为某个会话变量赋值</span><br><span class="line">方式一:</span><br><span class="line">SET @@session.tx_isolation=&apos;read-uncommitted&apos;;</span><br><span class="line">方式二:</span><br><span class="line">SET SESSION tx_isolation =&apos;read-committed&apos;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-5自定义变量"><a href="#1-6-5自定义变量" class="headerlink" title="1.6.5自定义变量"></a>1.6.5自定义变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">说明：变量是用户自定义的，不是由系统的</span><br><span class="line">使用步骤：</span><br><span class="line">声明</span><br><span class="line">赋值</span><br><span class="line">使用(查看、比较、运算等)</span><br><span class="line">*/</span><br><span class="line">1.用户变量</span><br><span class="line">/*</span><br><span class="line">作用域：针对于当前会话(连接)有效，同于会话变量的作用域</span><br><span class="line">*/</span><br><span class="line">1.声明并初始化</span><br><span class="line">SET @用户变量名=值;</span><br><span class="line">SET @用户变量名:=值;</span><br><span class="line">SELECT @用户变量名:=值;</span><br><span class="line">2.赋值(更新用户变量的值)</span><br><span class="line">方式一:通过set或select </span><br><span class="line">SET @用户变量名=值;或</span><br><span class="line">SET @用户变量名:=值;或</span><br><span class="line">SELECT @用户变量名:=值;</span><br><span class="line"></span><br><span class="line">方式二:通过select INTO </span><br><span class="line">SELECT 字段 INTO  变量名</span><br><span class="line">FROM 表;</span><br><span class="line">#使用(查看用户变量的值)</span><br><span class="line">SELECT @用户变量名;</span><br><span class="line"></span><br><span class="line">#案例：</span><br><span class="line">SET @name=&apos;john&apos;;</span><br><span class="line">SET @name=100;</span><br><span class="line">SET @count=1;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) INTO @name</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-6-局部变量"><a href="#1-6-6-局部变量" class="headerlink" title="1.6.6 局部变量"></a>1.6.6 局部变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">局部变量</span><br><span class="line">/*</span><br><span class="line">作用域：仅仅在定义它的begin end中有效</span><br><span class="line">应用在begin end中的第一名话</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">1.声明</span><br><span class="line">DECLARE  变量名 类型;</span><br><span class="line">DECLARE  变量名  类型  DEFAULT 值;</span><br><span class="line"></span><br><span class="line">2.赋值</span><br><span class="line">方式一：通过set或select </span><br><span class="line">SET 局部变量名=值;或</span><br><span class="line">SET 局部变量名:=值;或</span><br><span class="line">SELECT  @局部变量名:=值;</span><br><span class="line">方式二:通过select INTO </span><br><span class="line">SELECT 字段 INTO  局部变量名</span><br><span class="line">FROM 表;</span><br><span class="line"></span><br><span class="line">3.使用</span><br><span class="line">SELECT 局部变量名;</span><br><span class="line"></span><br><span class="line">对比用户变量和局部变量：</span><br><span class="line">	   作用域   	 定义和使用的位置  	                语法	 	</span><br><span class="line">用户变量   当前会话	 会话中的任何地方    			必须加@符号，不用限定类型</span><br><span class="line">局部变量   BEGIN end中   只能在begin END 中，且为第一句话	一般不用加@符号，需要限定类型</span><br><span class="line">	</span><br><span class="line">#案例：声明两个变量并赋初始值，求和，并打印</span><br><span class="line">1.用户变量</span><br><span class="line">SET  @m=1;</span><br><span class="line">SET @n=2;</span><br><span class="line">SET @sum=@m+@n;</span><br><span class="line">SELECT @sum;</span><br><span class="line">2.局部变量</span><br><span class="line">DECLARE  m INT DEFAULT 1;</span><br><span class="line">DECLARE  n INT DEFAULT 2;</span><br><span class="line">DECLARE  SUM  INT ;</span><br><span class="line">SET SUM =m+n;</span><br><span class="line">SELECT SUM;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-7-存储过程的介绍"><a href="#1-6-7-存储过程的介绍" class="headerlink" title="1.6.7 存储过程的介绍"></a>1.6.7 存储过程的介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">存储过程和函数</span><br><span class="line">/*</span><br><span class="line">存储过程和函数，类似于java中的方法</span><br><span class="line">好处：</span><br><span class="line">1.提高代码的重用性</span><br><span class="line">2.简化操作</span><br><span class="line">*/</span><br><span class="line">存储过程</span><br><span class="line">/*</span><br><span class="line">含义：一组预先编译好的sql语句的集合，理解成批处理语句</span><br><span class="line">1.提高代码的重用性</span><br><span class="line">2.简化操作</span><br><span class="line">3.减少了编译次数并且减少了和数据库服务器的连接次数，提高 了</span><br><span class="line">效率</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-8-存储过程的语法"><a href="#1-6-8-存储过程的语法" class="headerlink" title="1.6.8 存储过程的语法"></a>1.6.8 存储过程的语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">存储过程的语法 </span><br><span class="line">*/</span><br><span class="line">一.创建语法</span><br><span class="line">CREATE PROCEDURE  存储过程名(参数列表)</span><br><span class="line">BEGIN </span><br><span class="line">	存储过程体(一组合法的sql语句)</span><br><span class="line">END </span><br><span class="line">注意：</span><br><span class="line">1.参数列表包含三部分：</span><br><span class="line">参数模式  参数名   参数类型</span><br><span class="line">举例：</span><br><span class="line">IN stuname VARCHAR(20)</span><br><span class="line"></span><br><span class="line">参数模式：</span><br><span class="line">IN :该参数可以作为输入,也就是该参数需要调用方法入值</span><br><span class="line">OUT :该参数可以作为输出，也就是该参数可以作为返回值</span><br><span class="line">inout：该参数既可以作为输入又可以作为输出，也就是该参数</span><br><span class="line">既需要传入值，又可以返回值</span><br><span class="line"></span><br><span class="line">2.如果存储过程体仅仅只有一句话，begin end可以省略,</span><br><span class="line">存储过程体中的每条sql语句的结尾要求必须加分号，</span><br><span class="line">存储过程的结尾可以使用delimiter重新设置</span><br><span class="line">语法：</span><br><span class="line">DELIMITER 结束标记</span><br><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line">二.调用语法</span><br><span class="line"></span><br><span class="line">CALL 存储过程名(实参列表);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-6-9-空参的存储过程"><a href="#1-6-9-空参的存储过程" class="headerlink" title="1.6.9 空参的存储过程"></a>1.6.9 空参的存储过程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">空参列表：</span><br><span class="line">案例；插入到admin表中五条记录</span><br><span class="line">SELECT * FROM admin;</span><br><span class="line"></span><br><span class="line">DELIMITER  $</span><br><span class="line">CREATE PROCEDURE myp1()</span><br><span class="line">BEGIN </span><br><span class="line">	INSERT INTO admin(username,`password`)</span><br><span class="line">	VALUES(&apos;john1&apos;,&apos;0000&apos;),(&apos;liky&apos;,&apos;000&apos;),(&apos;liky&apos;,&apos;000&apos;),(&apos;liky&apos;,&apos;000&apos;);</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用</span><br><span class="line">CALL myp1()$</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-7-0-带in模式的存储过程"><a href="#1-7-0-带in模式的存储过程" class="headerlink" title="1.7.0 带in模式的存储过程"></a>1.7.0 带in模式的存储过程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">  创建带in模式参数的存储过程</span><br><span class="line"></span><br><span class="line">案例1：创建存储过程实现 根据女神名，查询对应的男神信息</span><br><span class="line"></span><br><span class="line">CALL myp1()$</span><br><span class="line">CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))</span><br><span class="line">BEGIN </span><br><span class="line">	SELECT bo.*</span><br><span class="line">	FROM boys bo </span><br><span class="line">	RIGHT JOIN beauty b ON bo.id = b.boyfriend_id</span><br><span class="line">	WHERE b.name=beautyName;</span><br><span class="line">	</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用 </span><br><span class="line">CALL myp2(&apos;柳岩&apos;)$</span><br><span class="line"></span><br><span class="line">#案例2：创建存储过程实现，用户是否登录成功</span><br><span class="line">CREATE PROCEDURE  myp3(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))</span><br><span class="line">BEGIN </span><br><span class="line">	DECLARE result VARCHAR(20) DEFAULT&apos;&apos;;#声明并初始化</span><br><span class="line">	SELECT COUNT(*) INTO result#赋值</span><br><span class="line">	FROM admin</span><br><span class="line">	WHERE admin.username=username</span><br><span class="line">	AND admin.password = PASSWORD;</span><br><span class="line">	SELECT result;#使用</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">#调用 </span><br><span class="line">CALL myp3(&apos;&apos;,&apos;&apos;)$</span><br></pre></td></tr></table></figure>


      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/31/java基础/java报错提示/java报错提示/" rel="next" title="java报错提示">
                <i class="fa fa-chevron-left"></i> java报错提示
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/02/开/" rel="prev" title>
                 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/guwang.jpg" alt="张易">
            
              <p class="site-author-name" itemprop="name">张易</p>
              <div class="site-description motion-element" itemprop="description">张易 来自东北省</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">56</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-1mysql下载安装"><span class="nav-number">1.</span> <span class="nav-text">1.1.1mysql下载安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-数据库的好处："><span class="nav-number">1.1.</span> <span class="nav-text">1.数据库的好处：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-MYSQL产品的特点"><span class="nav-number">1.2.</span> <span class="nav-text">2.MYSQL产品的特点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-2-mysql常见命令"><span class="nav-number">2.</span> <span class="nav-text">1.1.2 mysql常见命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-3-mysql语法规范"><span class="nav-number">3.</span> <span class="nav-text">1.1.3 mysql语法规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-4-模糊查询"><span class="nav-number">4.</span> <span class="nav-text">1.1.4 模糊查询</span></a></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#between-and"><span class="nav-number"></span> <span class="nav-text">between and</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-5-常见函数介绍"><span class="nav-number">1.</span> <span class="nav-text">1.1.5 常见函数介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-6-流程控制函数"><span class="nav-number">2.</span> <span class="nav-text">1.1.6 流程控制函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-7-case函数"><span class="nav-number">3.</span> <span class="nav-text">1.1.7 case函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-8-单选函数总结"><span class="nav-number">4.</span> <span class="nav-text">1.1.8 单选函数总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-9-单选函数案例"><span class="nav-number">5.</span> <span class="nav-text">1.1.9 单选函数案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-0-分组函数的介绍"><span class="nav-number">6.</span> <span class="nav-text">1.2.0 分组函数的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-1-分组函数的实例"><span class="nav-number">7.</span> <span class="nav-text">1.2.1 分组函数的实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-2-分组查询的介绍"><span class="nav-number">8.</span> <span class="nav-text">1.2.2 分组查询的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-3-连接查询的分类"><span class="nav-number">9.</span> <span class="nav-text">1.2.3 连接查询的分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-复习"><span class="nav-number">9.0.1.</span> <span class="nav-text">1.复习</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-4-sql99语法"><span class="nav-number">10.</span> <span class="nav-text">1.2.4 sql99语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-5-等值连接"><span class="nav-number">11.</span> <span class="nav-text">1.2.5 等值连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-6-自连接"><span class="nav-number">12.</span> <span class="nav-text">1.2.6 自连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-7-左右外连接"><span class="nav-number">13.</span> <span class="nav-text">1.2.7 左右外连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-8-子查询"><span class="nav-number">14.</span> <span class="nav-text">1.2.8 子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-9-where后面的行子查询使用"><span class="nav-number">15.</span> <span class="nav-text">1.2.9 where后面的行子查询使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-0-select后面的子查询使用"><span class="nav-number">16.</span> <span class="nav-text">1.3.0 select后面的子查询使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-1-exists后面的子查询"><span class="nav-number">17.</span> <span class="nav-text">1.3.1 exists后面的子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-2-子查询案例"><span class="nav-number">18.</span> <span class="nav-text">1.3.2 子查询案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-3-联合查询"><span class="nav-number">19.</span> <span class="nav-text">1.3.3 联合查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-4-插入语句的方式"><span class="nav-number">20.</span> <span class="nav-text">1.3.4 插入语句的方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-5-修改单表记录"><span class="nav-number">21.</span> <span class="nav-text">1.3.5 修改单表记录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-6-删除方式一"><span class="nav-number">22.</span> <span class="nav-text">1.3.6 删除方式一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-7-删除方式二"><span class="nav-number">23.</span> <span class="nav-text">1.3.7 删除方式二</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-8-DDl语言"><span class="nav-number">24.</span> <span class="nav-text">1.3.8 DDl语言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-9-库的管理"><span class="nav-number">25.</span> <span class="nav-text">1.3.9 库的管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-0-表的创建"><span class="nav-number">26.</span> <span class="nav-text">1.4.0 表的创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-1-表的修改"><span class="nav-number">27.</span> <span class="nav-text">1.4.1 表的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-2-表的删除"><span class="nav-number">28.</span> <span class="nav-text">1.4.2 表的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-3-库和表的管理"><span class="nav-number">29.</span> <span class="nav-text">1.4.3 库和表的管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-4-数据类型介绍"><span class="nav-number">30.</span> <span class="nav-text">1.4.4 数据类型介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-5-整型"><span class="nav-number">31.</span> <span class="nav-text">1.4.5 整型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-6-浮点型"><span class="nav-number">32.</span> <span class="nav-text">1.4.6 浮点型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-7-字符型"><span class="nav-number">33.</span> <span class="nav-text">1.4.7 字符型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-8-日期型"><span class="nav-number">34.</span> <span class="nav-text">1.4.8 日期型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-9-总结"><span class="nav-number">35.</span> <span class="nav-text">1.4.9 总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-0-常见约束"><span class="nav-number">36.</span> <span class="nav-text">1.5.0 常见约束</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-1-创建表时添加列级约束"><span class="nav-number">37.</span> <span class="nav-text">1.5.1 创建表时添加列级约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建表时添加表级约束"><span class="nav-number">37.0.1.</span> <span class="nav-text">创建表时添加表级约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-2-主键和唯一的区别"><span class="nav-number">38.</span> <span class="nav-text">1.5.2 主键和唯一的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-3-外键的特点"><span class="nav-number">39.</span> <span class="nav-text">1.5.3 外键的特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-4-修改表时添加约束"><span class="nav-number">40.</span> <span class="nav-text">1.5.4 修改表时添加约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#修改表时删除约束"><span class="nav-number">40.0.1.</span> <span class="nav-text">修改表时删除约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-5-标识列"><span class="nav-number">41.</span> <span class="nav-text">1.5.5 标识列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-6-事务的介绍"><span class="nav-number">42.</span> <span class="nav-text">1.5.6 事务的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-7-演示事务的使用"><span class="nav-number">43.</span> <span class="nav-text">1.5.7 演示事务的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-8-事务并发问题介绍"><span class="nav-number">44.</span> <span class="nav-text">1.5.8 事务并发问题介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-9-演示事务的隔离级别"><span class="nav-number">45.</span> <span class="nav-text">1.5.9 演示事务的隔离级别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#回滚点"><span class="nav-number">45.0.1.</span> <span class="nav-text">回滚点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-0-视图"><span class="nav-number">46.</span> <span class="nav-text">1.6.0 视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-1-视图的创建"><span class="nav-number">47.</span> <span class="nav-text">1.6.1 视图的创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-2-视图的修改"><span class="nav-number">48.</span> <span class="nav-text">1.6.2 视图的修改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#删除视图"><span class="nav-number">48.0.1.</span> <span class="nav-text">删除视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的更新"><span class="nav-number">48.0.2.</span> <span class="nav-text">视图的更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-3-变量的介绍"><span class="nav-number">49.</span> <span class="nav-text">1.6.3 变量的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-4-全局变量的演示"><span class="nav-number">50.</span> <span class="nav-text">1.6.4 全局变量的演示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-4-会话变量的演示"><span class="nav-number">51.</span> <span class="nav-text">1.6.4 会话变量的演示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-5自定义变量"><span class="nav-number">52.</span> <span class="nav-text">1.6.5自定义变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-6-局部变量"><span class="nav-number">53.</span> <span class="nav-text">1.6.6 局部变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-7-存储过程的介绍"><span class="nav-number">54.</span> <span class="nav-text">1.6.7 存储过程的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-8-存储过程的语法"><span class="nav-number">55.</span> <span class="nav-text">1.6.8 存储过程的语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-9-空参的存储过程"><span class="nav-number">56.</span> <span class="nav-text">1.6.9 空参的存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-0-带in模式的存储过程"><span class="nav-number">57.</span> <span class="nav-text">1.7.0 带in模式的存储过程</span></a></li></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
    <div id="msic163player">
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=482207546&auto=0&height=66"></iframe>
    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张易</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
